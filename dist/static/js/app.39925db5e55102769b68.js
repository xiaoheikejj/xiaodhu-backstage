webpackJsonp([1],{"0WEN":function(e,t){},"1eLg":function(e,t){},"63As":function(e,t){},ACHB:function(e,t){},AuaF:function(e,t){},BWX4:function(e,t){},Bj1a:function(e,t){},HETq:function(e,t){},"L+jq":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},o,!1,function(e){a("Bj1a")},null,null).exports,l=a("uNf3"),i=a.n(l),r=(a("UhgQ"),a("aozt")),c=a.n(r),u=a("/ocq"),p=a("//Fk"),m=a.n(p),d=a("mw3O"),v=a.n(d),h="http://120.27.245.101:9001/smart.call",g=function(e,t,a){var n=c.a.create({});return"get"===t?n.get(""+h+e,{params:a}).then(function(e){if(e.data)return e.data;var t=new Error;return t.msg="服务器内部错误",m.a.reject(t)}).catch(function(e){throw e}):"post"===t?(a=v.a.stringify(a),n.post(""+h+e,a).then(function(e){if(e.data)return e.data;var t=new Error;return t.msg="服务器内部错误",m.a.reject(t)}).catch(function(e){throw e})):void 0},f={data:function(){var e=this;return{admin:"",title:"微盘人工智能大后台管理系统",firstName:[],input:"",dialog:{changepw:!1},ruleForm:{oldpass:"",newpass:"",checkpass:""},rules:{oldpass:[{required:!0,message:"请输入密码",trigger:"blur"}],newpass:[{required:!0,message:"请输入新密码",trigger:"blur"}],checkpass:[{validator:function(t,a,n){""===a?n(new Error("请再次输入密码")):a!==e.ruleForm.newpass?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}]}}},created:function(){var e=this,t=new URLSearchParams;t.append("groupId",1),c.a.post(h+"/userresource/getUserResourceList",t).then(function(t){e.firstName=t.data}).catch(function(e){console.log(e)}),this.admin=sessionStorage.getItem("userName")},mounted:function(){setTimeout(function(){},1e3)},computed:{onRoutes:function(){return this.$route.path.replace("/","")}},watch:{},methods:{signOut:function(){var e=this;$.ajax({url:h+"/user/logOut",type:"post",success:function(){sessionStorage.removeItem("userName"),e.$message({showClose:!0,message:"退出成功",type:"success"}),e.$router.push("/")},error:function(){e.$message({showClose:!0,message:"账户过期",type:"warning"})}})},submitForm:function(){var e=this;$.ajax({url:h+"/user/updatePwd",type:"post",data:{userPwd:e.ruleForm.oldpass,newPwd:e.ruleForm.newpass},success:function(t){0==t.status?(e.$message({showClose:!0,message:"成功的修改了密码",type:"success"}),e.ruleForm.oldpass="",e.ruleForm.newpass="",e.ruleForm.checkpass=""):e.$message({showClose:!0,message:"原密码错误",type:"warning"})},error:function(){e.$message({showClose:!0,message:"修改失败",type:"error"})}})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{id:"Main"}},[a("el-header",{staticClass:"clearfix el-head-parent"},[a("span",{staticClass:"fl"},[e._v(e._s(e.title))]),e._v(" "),a("div",{staticClass:"fr"},[a("i",{staticStyle:{"margin-right":"0",color:"#fff","margin-top":"20px"}},[e._v(e._s(e.admin)+"，你好")]),e._v(" "),a("i",{staticStyle:{color:"#fff"},on:{click:e.signOut}},[e._v("退出")]),e._v(" "),a("i",{staticStyle:{color:"#fff"},on:{click:function(t){e.dialog.changepw=!0}}},[e._v("修改密码")])])]),e._v(" "),a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":"/merchantList","unique-opened":!0,"background-color":"#313540","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"1"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),e._v(" "),e._l(e.firstName,function(t,n){return a("el-submenu",{key:"mainFirstName"+n,attrs:{index:n+"1",query:n}},[a("template",{slot:"title"},[a("span",[e._v(e._s(t.resName))])]),e._v(" "),a("el-menu-item-group",e._l(t.tblAuthResourceList,function(t,o){return a("el-menu-item",{key:"mainSecondName"+o,attrs:{index:t.resUrl,query:n+1+"-"+(o+1)}},[e._v(e._s(t.resName))])}))],2)})],2)],1),e._v(" "),a("div",{staticClass:"content"},[a("transition",{attrs:{name:"move",mode:"out-in"}},[a("router-view")],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改密码",visible:e.dialog.changepw,width:"30%"},on:{"update:visible":function(t){e.$set(e.dialog,"changepw",t)}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules}},[a("el-form-item",{attrs:{prop:"oldpass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"原密码"},model:{value:e.ruleForm.oldpass,callback:function(t){e.$set(e.ruleForm,"oldpass",t)},expression:"ruleForm.oldpass"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"newpass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"新密码"},model:{value:e.ruleForm.newpass,callback:function(t){e.$set(e.ruleForm,"newpass",t)},expression:"ruleForm.newpass"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"checkpass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"确认新密码"},model:{value:e.ruleForm.checkpass,callback:function(t){e.$set(e.ruleForm,"checkpass",t)},expression:"ruleForm.checkpass"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.changepw=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm(),e.dialog.changepw=!1}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(f,_,!1,function(e){a("cxCd")},null,null).exports,y={name:"Login",data:function(){var e=this;return{ruleForm:{name:"",pass:"",code:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],pass:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],code:[{validator:function(t,a,n){if(""==e.ruleForm.code||e.ruleForm.code!=""+e.random)return n(new Error("请输入正确的验证码"));n()},trigger:"blur"}]},username:"",password:"",nouerText:"",nopassText:"",random:0,nocodeText:"",padVal:""}},created:function(){this.random=parseInt(8999*Math.random())+1e3;var e=this;document.onkeyup=function(t){13==(t||window.event).keyCode&&e.submitForm("ruleForm")}},methods:{mathNum:function(){this.random=parseInt(8999*Math.random())+1e3},submitForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(e)if(""==t.ruleForm.code||t.ruleForm.code!=t.random)t.$message({showClose:!0,message:"登陆不成功",type:"error"});else{var n=new URLSearchParams;n.append("userName",t.ruleForm.name),n.append("userPwd",t.$md5(t.ruleForm.pass)),c.a.post(h+"/user/login",n).then(function(e){0==e.data.status?(t.$router.push({path:"/main"}),sessionStorage.setItem("userName",a.ruleForm.name)):1==e.data.status?t.$message({showClose:!0,message:"账户或密码错误",type:"warning"}):2==e.data.status&&t.$message({showClose:!0,message:"账户过期",type:"warning"})}).catch(function(e){t.$message({showClose:!0,message:"登陆失败",type:"warning"})})}else t.$message({showClose:!0,message:"登陆不了",type:"error"})})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"login"}},[a("div",{staticClass:"container"},[e._m(0),e._v(" "),a("div",{staticClass:"table"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{prop:"name"}},[a("el-input",{attrs:{clearable:"",placeholder:"用户名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"30px"},attrs:{prop:"pass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",clearable:"",placeholder:"密码"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),a("el-form-item",{staticClass:"code",staticStyle:{"margin-top":"30px"},attrs:{prop:"code"}},[a("el-input",{attrs:{type:"text",clearable:"",placeholder:"验证码"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}}),e._v(" "),a("input",{staticClass:"randomNum",attrs:{type:"button",value:e.random},on:{click:e.mathNum}})],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{attrs:{span:20,offset:2}},[a("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h1",[this._v("小电呼智能语音机器人")]),this._v(" "),t("p",[this._v("后台管理系统")])])}]};var w=a("VU/8")(y,k,!1,function(e){a("0WEN")},null,null).exports,C={data:function(){return{tableData:[],search:{industry:[],province:[],city:[],agent:[]},searchValue:{cityValue:"",provinceValue:"",industryValue:"",agentValue:"",timeBegin:"",timeEnd:"",commodityName:""},cIndustry:"",cProvince:"",cCity:"",merchantFrom:"",pageNum:1,pageSize:10,datumShow:!1,frozen:!1,thaw:!1,row:{},datumData:{},frozenShow:!1,thawShow:!1,successShow:!1,frozenReason:"",page:{pagecount:"",pagecurrent:1}}},created:function(){var e=this;(new Date).getTime();this.tableInit(1,10),this.$axios.get(h+"/sysdicttreedata/getCategory").then(function(t){e.search.industry=t.data}).catch(function(e){console.log(e)}),this.$axios.get(h+"/areacode/getProvince").then(function(t){e.search.province=t.data}).catch(function(e){console.log(e)}),this.$axios.get(h+"/agent/getAgentList").then(function(t){e.search.agent=t.data}).catch(function(e){console.log(e)})},mounted:function(){},methods:{handleSizeChange:function(e){this.tableInit(1,e)},handleCurrentChange:function(e){this.tableInit(e,10)},tableInit:function(e,t){var a=this;$.ajax({url:h+"/merchant/searchMerchantList",type:"post",data:{mercName:a.searchValue.commodityName,startTime:a.searchValue.timeBegin,endTime:a.searchValue.timeEnd,mercIndustry:a.searchValue.industryValue,mercProvince:a.searchValue.provinceValue,mercCity:a.searchValue.cityValue,agentSeq:a.searchValue.agentValue,page:e,size:t},success:function(e){console.log(e),e.dataInfo.forEach(function(e,t){e.mercBeginTime=new Date(e.mercBeginTime).getFullYear()+"-"+(new Date(e.mercBeginTime).getMonth()+1)+"-"+new Date(e.mercBeginTime).getDate(),e.area=e.provinceName+e.cityName,0==e.mercStatus?e.mercStatus="启用":1==e.mercStatus?e.mercStatus="停止":2==e.mercStatus&&(e.mercStatus="冻结")}),a.tableData=e.dataInfo,a.page.pagecount=e.count},error:function(e){console.log(e)}})},searchSubmit:function(){},tableClick:function(e){var t=this;this.row=e,$.ajax({url:h+"/merchant/getMerchantByMercSeq",type:"post",data:{mercSeq:t.row.mercSeq},success:function(e){t.datumData=e,t.datumData.area=t.datumData.provinceName+t.datumData.cityName;var a=new Date(t.datumData.mercBeginTime);t.datumData.mercBeginTime=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),0==t.datumData.mercStatus?(t.datumData.mercStatus="正常",t.frozen=!0,t.thaw=!1):2==t.datumData.mercStatus&&(t.datumData.mercStatus="冻结",t.thaw=!0,t.frozen=!1)},error:function(e){console.log(e)}})},frozenClick:function(){this.frozenShow=!0,this.datumShow=!1},thawClick:function(){this.thawShow=!0,this.datumShow=!1},frozenSubmit:function(){var e=this;$.ajax({url:h+"/merchant/updateMercStatus",type:"post",data:{mercSeq:e.row.mercSeq,mercStatus:2,frozenCause:e.frozenReason},success:function(t){e.frozenShow=!1,e.successShow=!0,e.tableInit(1,10),e.page.pagecurrent=1},error:function(e){console.log(e)}})},thawSubmit:function(){var e=this;$.ajax({url:h+"/merchant/updateMercStatus",type:"post",data:{mercSeq:e.row.mercSeq,mercStatus:0},success:function(t){e.thawShow=!1,e.successShow=!0,e.row.mercStatus="启用",e.tableInit(1,10),e.page.pagecurrent=1},error:function(e){console.log(e)}})},changeProvinceToGetCity:function(){var e=this;$.ajax({url:h+"/areacode/getCity",type:"post",data:{areaSupCode:e.searchValue.provinceValue},success:function(t){e.search.city=t},error:function(e){console.log(e)}})},changeCity:function(e){this.cCity=e}}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"merchantList"}},[a("el-header",{staticClass:"el-head-child"},[e._v("\n        商户列表\n    ")]),e._v(" "),a("div",{staticClass:"search",staticStyle:{"background-color":"#f0f3f6","padding-top":"20px"}},[a("div",{staticClass:"inputs"},[a("div",[a("span",[e._v("商品名称/编号/关键字 : ")]),e._v(" "),a("el-input",{staticClass:"merchat",staticStyle:{"margin-right":"30px"},model:{value:e.searchValue.commodityName,callback:function(t){e.$set(e.searchValue,"commodityName",t)},expression:"searchValue.commodityName"}}),e._v(" "),a("span",[e._v("商户入网时间 : ")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.searchValue.timeBegin,callback:function(t){e.$set(e.searchValue,"timeBegin",t)},expression:"searchValue.timeBegin"}}),e._v("\n                    至\n                "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.searchValue.timeEnd,callback:function(t){e.$set(e.searchValue,"timeEnd",t)},expression:"searchValue.timeEnd"}})],1),e._v(" "),a("div",{staticClass:"inputs-bottom"},[a("span",[e._v("行业 : ")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchValue.industryValue,callback:function(t){e.$set(e.searchValue,"industryValue",t)},expression:"searchValue.industryValue"}},e._l(e.search.industry,function(e,t){return a("el-option",{key:"chantListind"+t,attrs:{label:e.value,value:e.orderno}})})),e._v(" "),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("所在地区: ")]),e._v(" "),a("el-select",{attrs:{placeholder:"省"},on:{change:e.changeProvinceToGetCity},model:{value:e.searchValue.provinceValue,callback:function(t){e.$set(e.searchValue,"provinceValue",t)},expression:"searchValue.provinceValue"}},e._l(e.search.province,function(e,t){return a("el-option",{key:"chantListpro"+t,attrs:{label:e.areaName,value:e.areaId}})})),e._v(" "),a("el-select",{attrs:{placeholder:"市"},model:{value:e.searchValue.cityValue,callback:function(t){e.$set(e.searchValue,"cityValue",t)},expression:"searchValue.cityValue"}},e._l(e.search.city,function(e,t){return a("el-option",{key:"chantListCity"+t,attrs:{label:e.areaName,value:e.areaId}})})),e._v(" "),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("商户来源: ")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchValue.agentValue,callback:function(t){e.$set(e.searchValue,"agentValue",t)},expression:"searchValue.agentValue"}},e._l(e.search.agent,function(e,t){return a("el-option",{key:"chantListAgent"+t,attrs:{label:e.agentName,value:e.agentSeq}})})),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.tableInit()}}},[e._v("搜索")])],1)])]),e._v(" "),a("el-main",[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",data:e.tableData,stripe:""},on:{"cell-click":e.tableClick}},[a("el-table-column",{attrs:{prop:"mercSeq",label:"商户编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercName",label:"商户名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"industryName",label:"行业"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area",label:"所在地"}}),e._v(" "),a("el-table-column",{attrs:{prop:"portNum",label:"机器人数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercBeginTime",label:"客户入网时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentName",label:"客户来源"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercBusinessEntityContactName",label:"联系人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercBusinessEntityContactPhone",label:"联系人电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercStatus",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.datumShow=!0}}},[e._v("查看资料")])]}}])})],1),e._v(" "),0!=e.page.pagecount?a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.page.pagecurrent,total:e.page.pagecount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"pagecurrent",t)}}}):e._e(),e._v(" "),a("el-dialog",{attrs:{visible:e.datumShow,width:"50%"},on:{"update:visible":function(t){e.datumShow=t}}},[a("div",{staticClass:"top"},[e._v("\n            商户信息\n        ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("企业名称:"+e._s(e.datumData.agentName))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("身份信息:商户")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("企业所在地:"+e._s(e.datumData.area))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("所属行业:"+e._s(e.datumData.industryName))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("营业执照号/统一社会信用代码:"+e._s(e.datumData.mercBusinessLicense))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("商户来源:"+e._s(e.datumData.agentName))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("企业法人姓名:"+e._s(e.datumData.mercBusinessEntityName))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("企业法人身份证:"+e._s(e.datumData.mercBusinessId))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("企业联系人姓名:"+e._s(e.datumData.mercBusinessEntityContactName))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("企业联系人电话:"+e._s(e.datumData.mercBusinessEntityContactPhone))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("企业邮箱:"+e._s(e.datumData.mercBusinessMail))])],1),e._v(" "),a("div",{staticClass:"top"},[e._v("\n            图片资料\n        ")]),e._v(" "),a("img",{attrs:{src:"/static/blue-2.png",alt:""}}),e._v(" "),a("div",{staticClass:"top"},[e._v("\n            账户信息\n        ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("账户状态:"+e._s(e.datumData.mercStatus)+"\n                "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.frozen,expression:"frozen"}],attrs:{type:"primary"},on:{click:e.frozenClick}},[e._v("冻结")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.thaw,expression:"thaw"}],attrs:{type:"primary"},on:{click:e.thawClick}},[e._v("解冻")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("子账户数量:")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("商户入网时间:"+e._s(e.datumData.mercBeginTime))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("套餐剩余有效期:")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("备注:"+e._s(e.datumData.frozenCause))])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.datumShow=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"冻结",visible:e.frozenShow,width:"30%"},on:{"update:visible":function(t){e.frozenShow=t}}},[e._v("\n    冻结原因：\n    "),a("el-input",{attrs:{type:"textarea",resize:"none"},model:{value:e.frozenReason,callback:function(t){e.frozenReason=t},expression:"frozenReason"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.frozenShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.frozenSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"解冻",visible:e.thawShow,width:"30%"},on:{"update:visible":function(t){e.thawShow=t}}},[a("span",[e._v("是否解冻")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.thawShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.thawSubmit}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"成功了",visible:e.successShow,width:"30%"},on:{"update:visible":function(t){e.successShow=t}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.successShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.successShow=!1}}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var x=a("VU/8")(C,S,!1,function(e){a("AuaF")},null,null).exports,F=a("mvHQ"),N=a.n(F),I=a("OvRC"),V=a.n(I),P={data:function(){return{lists:[{parentVoiceDesc:"开场白",childVoiceDesc:"点击选择"}],removeListNum:0,tempSeq:0,dialogVisible:!1,dialogShow:!1,tableData:[],parentObj:{},childObj:{},extendArray:[],index:0}},created:function(){this.tempSeq=sessionStorage.getItem("tempSeq")},methods:{addList:function(){this.lists.push({parentVoiceDesc:"开场白",childVoiceDesc:"点击选择"})},removeList:function(e){(e=e||window.event).target||e.srcElement;this.removeListNum=e.target.getAttribute("query"),this.removeListNum>0&&this.lists.splice(this.removeListNum,1)},getParentSeq:function(e){var t=this,a=new URLSearchParams;a.append("tempSeq",parseInt(this.tempSeq)),this.$axios.post(h+"/voicestatement/getVoiceStatementList",a).then(function(e){t.tableData=e.data}).catch(function(e){console.log(e)}),this.dialogVisible=!0,this.index=e},getChildSeq:function(){var e=this,t=new URLSearchParams;t.append("tempSeq",parseInt(this.tempSeq)),this.$axios.post(h+"/voicestatement/getVoiceStatementList",t).then(function(t){e.tableData=t.data}).catch(function(e){console.log(e)}),this.dialogShow=!0},clickParentTableRow:function(e,t,a){this.lists[this.index].parentVoiceDesc=e.voiceDesc,this.dialogVisible=!1,this.parentObj.tempSeq=e.tempSeq,this.parentObj.voiceSeq=e.voiceSeq,this.parentObj.voiceType=e.voiceType},clickChildTableRow:function(e,t,a){this.lists[this.index].childVoiceDesc=e.voiceDesc,this.dialogShow=!1,this.childObj.voiceSeqSub=e.voiceSeq,this.childObj.voiceSearch=e.voiceSearch;var n=$.extend(this.parentObj,this.childObj),o=V()(null);for(var s in n)o[s]=n[s];this.extendArray.push(o)},submit:function(){var e=this;$.ajax({url:h+"/speechrelation/addSpeechRelation",type:"POST",dataType:"json",contentType:"application/json",data:N()(e.extendArray),success:function(t){e.$message({showClose:!0,message:"第三步成功了",type:"success"}),e.$router.push("/degIntention")},error:function(e){console.log(e)}})}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"proFormulation"}},[a("div",{staticClass:"header"},[a("el-header",[a("span",[e._v("配置模板")])])],1),e._v(" "),a("div",{staticClass:"bottom"},[e._m(0),e._v(" "),a("div",{staticClass:"content"},[a("ul",e._l(e.lists,function(t,n){return a("li",{attrs:{query:n}},[a("el-button-group",[a("el-button",{staticClass:"text",on:{click:function(t){e.getParentSeq(n)}}},[e._v(e._s(t.parentVoiceDesc))]),e._v(" "),a("el-button",{staticClass:"logo"})],1),e._v(" "),a("i",{staticClass:"arrow"}),e._v(" "),a("el-button",{staticClass:"select",on:{click:e.getChildSeq}},[e._v(e._s(t.childVoiceDesc))]),e._v(" "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addList}}),e._v(" "),a("i",{staticClass:"el-icon-delete",attrs:{query:n},on:{click:function(t){e.removeList(t)}}})],1)})),e._v(" "),a("el-button",{staticClass:"next-step",attrs:{type:"primary"},on:{click:e.submit}},[e._v("下一步")])],1),e._v(" "),a("el-dialog",{attrs:{title:"选择语音",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"row-click":e.clickParentTableRow}},[a("el-table-column",{attrs:{prop:"voiceSeq",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"voiceSearch",label:"关键字"}}),e._v(" "),a("el-table-column",{attrs:{prop:"voiceDesc",label:"语言文字"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v("重置密码")])]}}])})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择语音",visible:e.dialogShow,width:"50%"},on:{"update:visible":function(t){e.dialogShow=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"row-click":e.clickChildTableRow}},[a("el-table-column",{attrs:{prop:"voiceSeq",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"voiceSearch",label:"关键字"}}),e._v(" "),a("el-table-column",{attrs:{prop:"voiceDesc",label:"语言文字"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v("重置密码")])]}}])})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogShow=!1}}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"status"},[t("li",[this._v("模板属性")]),this._v(" "),t("li",[this._v("音频上传")]),this._v(" "),t("li",[this._v("流程定制")]),this._v(" "),t("li",[this._v("意向程度设置")])])}]};var T=a("VU/8")(P,D,!1,function(e){a("ivFn")},null,null).exports,q={data:function(){return{industryList:[],industryValue:"",provinceName:"",provinceValue:"",cityName:"",cityValue:"",companyName:"",companyValue:"",industryVal:"",provinceVal:"",cityVal:"",companyVal:"",mercSeqVal:"",ruleForm:{title:"",industry:"",province:"",city:"",company:""},rules:{title:[{required:!0,message:"请输入模板名称",trigger:"blur"}],industry:[{required:!0,message:"请选择行业",trigger:"change"}],province:[{required:!0,message:"请选择省",trigger:"change"}],city:[{required:!0,message:"请选择市",trigger:"change"}],company:[{required:!0,message:"请选择市",trigger:"change"}]}}},created:function(){var e=this;this.$axios.post(h+"/sysdicttreedata/getCategory").then(function(t){e.industryList=t.data}).catch(function(e){console.log(e)}),this.$axios.post(h+"/areacode/getProvince").then(function(t){e.provinceName=t.data}).catch(function(e){console.log(e)}),this.$axios.post(h+"/merchant/getMerchantList").then(function(t){e.companyName=t.data}).catch(function(e){console.log(e)})},methods:{changecompany:function(e){var t=this;this.companyName.map(function(a,n){a.mercSeq==e&&(t.companyVal=a.mercName)})},changeprovinceValue:function(){var e=this;$.ajax({url:h+"/areacode/getCity",type:"post",data:{areaSupCode:e.ruleForm.province},success:function(t){e.cityName=t},error:function(){console.log(err)}})},next:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({message:"信息验证错误",type:"error"}),!1;$.ajax({url:h+"/speechtemplate/addTemplate",type:"post",data:{tempTitle:t.ruleForm.title,code:t.ruleForm.industry,tempProvince:t.ruleForm.province,tempCity:t.ruleForm.city,mercName:t.companyVal,mercSeq:t.ruleForm.company},success:function(e){sessionStorage.setItem("tempSeq",e.tempSeq),"0"==e.status?(t.$message({showClose:!0,message:"第一步成功了",type:"success"}),t.$router.push("/audioUpload")):"1"==e.status&&t.$message({showClose:!0,message:"模板名称重复",type:"warning"}),console.log(e)},error:function(){t.$message({showClose:!0,message:"创建失败",type:"error"})}})})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"templateAttribute"},[a("div",{staticClass:"header"},[a("el-header",[a("span",[e._v("配置模板")])])],1),e._v(" "),a("div",{staticClass:"bottom"},[e._m(0),e._v(" "),a("div",{staticClass:"voiceTemplateStep1"},[a("el-row",[a("el-col",{attrs:{span:8,offset:8}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"模板标题:",prop:"title"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属行业:",prop:"industry"}},[a("el-select",{attrs:{placeholder:"下拉选择"},model:{value:e.ruleForm.industry,callback:function(t){e.$set(e.ruleForm,"industry",t)},expression:"ruleForm.industry"}},e._l(e.industryList,function(e,t){return a("el-option",{key:"tempAttrIndustry"+t,attrs:{value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"所属地区:",prop:"tile"}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{prop:"province"}},[a("el-select",{attrs:{placeholder:"省"},on:{change:e.changeprovinceValue},model:{value:e.ruleForm.province,callback:function(t){e.$set(e.ruleForm,"province",t)},expression:"ruleForm.province"}},e._l(e.provinceName,function(e,t){return a("el-option",{key:"tempAttrProvince"+t,attrs:{label:e.areaName,value:e.areaId}})}))],1)],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{prop:"city"}},[a("el-select",{attrs:{placeholder:"市"},model:{value:e.ruleForm.city,callback:function(t){e.$set(e.ruleForm,"city",t)},expression:"ruleForm.city"}},e._l(e.cityName,function(e,t){return a("el-option",{key:"tempAttrCity"+t,attrs:{label:e.areaName,value:e.areaId}})}))],1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"使用公司:",prop:"company"}},[a("el-select",{attrs:{placeholder:"下拉选择"},on:{change:e.changecompany},model:{value:e.ruleForm.company,callback:function(t){e.$set(e.ruleForm,"company",t)},expression:"ruleForm.company"}},e._l(e.companyName,function(e,t){return a("el-option",{key:"tempAttrCompany"+t,attrs:{label:e.mercName,value:e.mercSeq}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"257px"},attrs:{"el-button":"",type:"primary"},on:{click:function(t){e.next("ruleForm")}}},[e._v("下一步")])],1)],1)],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"status"},[t("li",[this._v("模板属性")]),this._v(" "),t("li",[this._v("音频上传")]),this._v(" "),t("li",[this._v("流程定制")]),this._v(" "),t("li",[this._v("意向程度设置")])])}]};var R=a("VU/8")(q,A,!1,function(e){a("BWX4")},null,null).exports,E={data:function(){return{clickenter:!0,clickenter1:!1,endclickenter:!0,endclickenter1:!1,keywordclickenter:!0,keywordclickenter1:!1,options:[{value:"触发关键词",id:1},{value:"触发条件",id:2}],options1:[{value:"低优先级触发"},{value:"高优先级触发"}],open_white:[""],pro_statement:[""],end:[""],global_pro:[""],over_time:[""],key_word:[""],to_save:[""],statementVal:"",statementValPriority:"",endVal:"",endValPriority:"",keywordVal:"",keywordValPriority:"",span1:[],span2:[],span3:[],uploadToSql:[],acceptFile:[],span1Tag:"",processState:{key0:"",key1:"",key2:""},endState:{key0:"",key1:"",key2:""},globalQue:{key0:"",key1:"",key2:""}}},mounted:function(){$(document).on("click",".icon-delete",function(){$(this).parents(".list").remove(),$(this).parents(".domList").remove()})},methods:{addWhite:function(){this.open_white.push("")},addStatement:function(){this.pro_statement.push("")},addEnd:function(){this.end.length<3&&this.end.push("")},globalPro:function(){this.global_pro.push("")},addovertime:function(){this.over_time.length<3&&this.over_time.push("")},addkeyword:function(){this.key_word.length<3&&this.key_word.push("")},addtosave:function(){this.to_save.length<3&&this.to_save.push("")},changestatementVal:function(e){1==e?(this.clickenter=!0,this.clickenter1=!1):2==e&&(this.clickenter=!1,this.clickenter1=!0),console.log(this.clickenter)},chageendVal:function(e){1==e?(this.endclickenter=!0,this.endclickenter1=!1):2==e&&(this.endclickenter=!1,this.endclickenter1=!0)},changekeywordVal:function(e){1==e?(this.keywordclickenter=!0,this.keywordclickenter1=!1):2==e&&(this.keywordclickenter=!1,this.keywordclickenter1=!0)},submitUpload:function(){},next:function(){var e=this,t=sessionStorage.getItem("tempSeq"),a=new FormData($("#uploadForm")[0]);$.ajax({url:h+"/upload/fileupload",type:"POST",data:a,async:!1,cache:!1,contentType:!1,processData:!1,success:function(t){e.acceptFile=t},error:function(e){console.log(e)}});var n=[];$(".hasIpt :text").each(function(e,t){""==$(this).val()?n.push(null):n.push($(this).val())});for(var o=[],s=0;s<8;s++)o[s]=null;var l=[];$(".spanclass1 input").each(function(){""!==$(this).val()&&l.push($(this).val())}),$(".spanclass2 input").each(function(){""!==$(this).val()&&l.push($(this).val())}),$(".spanclass3 input").each(function(){""!==$(this).val()&&l.push($(this).val())}),l.forEach(function(e,t){o.splice(1+t,0,e)}),console.log(o),$(".hasQuery").each(function(a,s){e.uploadToSql.push({voiceType:parseInt($(this).attr("query")),tempSeq:parseInt(t),voiceSearch:o[a],voiceDesc:n[a],voiceFilePath:e.acceptFile[a]})}),console.log(this.uploadToSql),this.$axios.post(h+"/voicestatement/addVoiceStatement",this.uploadToSql).then(function(t){e.$message({showClose:!0,message:"第二步成功了",type:"success"}),e.$router.push("/proFormulation")}).catch(function(e){console.log(e)})},spanenter1:function(){var e=document.getElementsByClassName("spanclass1")[0].children;""!==e[0].value&&this.span1.push(e[0].value),e[0].value="",console.log(this.span1)},spanenter2:function(){var e=document.getElementsByClassName("spanclass2")[0].children;""!==e[0].value&&this.span2.push(e[0].value)},spanenter3:function(){var e=document.getElementsByClassName("spanclass3")[0].children;""!==e[0].value&&this.span3.push(e[0].value)},editSpan1:function(e){this.span1.splice(this.span1.indexOf(e),1)},editSpan2:function(){this.span2.pop()},editSpan3:function(){this.span3.pop()}}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"audioUpload"}},[a("form",{attrs:{id:"uploadForm",autocomplete:"off",method:"post"}},[a("div",{staticClass:"header"},[a("el-header",[a("span",[e._v("配置模板")])])],1),e._v(" "),a("div",{staticClass:"bottom"},[e._m(0),e._v(" "),a("div",{staticClass:"voiceTemplateStep2"},[a("div",{staticClass:"open-white type1"},[a("div",{staticClass:"top"},[a("i",{staticClass:"el-icon-caret-bottom"}),e._v("\n                        开场白\n                        "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addWhite}})]),e._v(" "),e._l(e.open_white,function(t,n){return a("div",{staticClass:"domList hasQuery",attrs:{index:n+1,query:"9010100"}},[a("div",[a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"filewhite"+n,value:"",accept:"audio/wav"}})],1)])})],2),e._v(" "),a("div",{staticClass:"open-white pro-statement type2"},[a("div",{staticClass:"top"},[a("i",{staticClass:"el-icon-caret-bottom"}),e._v("\n                        流程语句\n                        "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addStatement}})]),e._v(" "),e._l(e.pro_statement,function(t,n){return a("div",{staticClass:"list hasQuery",attrs:{index:n+1,query:"9010200"}},[a("div",{staticClass:"member1"},[a("el-select",{attrs:{placeholder:"触发关键词"},on:{change:e.changestatementVal},model:{value:e.statementVal,callback:function(t){e.statementVal=t},expression:"statementVal"}},e._l(e.options,function(e,t){return a("el-option",{key:"audioUpStatement1"+t,attrs:{label:e.value,value:e.id}})})),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.clickenter,expression:"clickenter"}],staticClass:"spanclass1",attrs:{placeholder:"例如：好的|需要"},model:{value:e.processState["key"+n],callback:function(t){e.$set(e.processState,"key"+n,t)},expression:"processState['key' + index]"}}),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.clickenter1,expression:"clickenter1"}],attrs:{placeholder:"低优先级默认"},model:{value:e.statementValPriority,callback:function(t){e.statementValPriority=t},expression:"statementValPriority"}},e._l(e.options1,function(e,t){return a("el-option",{key:"audioUpStatement2"+t,attrs:{value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"member2"},[a("span",[e._v("对应回答：")]),e._v(" "),a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"filestate"+n,value:"",accept:"audio/wav"}})],1)])})],2),e._v(" "),a("div",{staticClass:"open-white pro-statement type3"},[a("div",{staticClass:"top"},[a("i",{staticClass:"el-icon-caret-bottom"}),e._v("\n                        结束\n                        "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addEnd}})]),e._v(" "),e._l(e.end,function(t,n){return a("div",{staticClass:"list hasQuery",attrs:{index:n+1,query:"9010300"}},[a("p",[e._v("结束"+e._s(n+1)+"：")]),e._v(" "),a("div",{staticClass:"member1"},[a("el-select",{attrs:{placeholder:"触发关键词"},on:{change:e.chageendVal},model:{value:e.endVal,callback:function(t){e.endVal=t},expression:"endVal"}},e._l(e.options,function(e,t){return a("el-option",{key:"audioend1"+t,attrs:{label:e.value,value:e.id}})})),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.endclickenter,expression:"endclickenter"}],staticClass:"spanclass2",attrs:{placeholder:"例如：好的|需要",lang:""},model:{value:e.endState["key"+n],callback:function(t){e.$set(e.endState,"key"+n,t)},expression:"endState['key' + index]"}}),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.endclickenter1,expression:"endclickenter1"}],attrs:{placeholder:"低优先级默认"},model:{value:e.endValPriority,callback:function(t){e.endValPriority=t},expression:"endValPriority"}},e._l(e.options1,function(e,t){return a("el-option",{key:"audioend2"+t,attrs:{value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"member2"},[a("span",[e._v("对应回答：")]),e._v(" "),a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"filesend"+n,value:"",accept:"audio/wav"}})],1)])})],2),e._v(" "),a("div",{staticClass:"open-white pro-statement type4"},[a("div",{staticClass:"top"},[a("i",{staticClass:"el-icon-caret-bottom"}),e._v("\n                        全局问题\n                        "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.globalPro}})]),e._v(" "),e._l(e.global_pro,function(t,n){return a("div",{staticClass:"list hasQuery",attrs:{index:n+1,query:"9020100"}},[a("div",{staticClass:"member1"},[a("el-select",{attrs:{placeholder:"触发关键词"},on:{change:e.changekeywordVal},model:{value:e.keywordVal,callback:function(t){e.keywordVal=t},expression:"keywordVal"}},e._l(e.options,function(e,n){return a("el-option",{key:"audioUpG1"+n,attrs:{label:t.value,value:t.id}})})),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.keywordclickenter,expression:"keywordclickenter"}],staticClass:"spanclass3",attrs:{placeholder:"例如：好的|需要"},model:{value:e.globalQue["key"+n],callback:function(t){e.$set(e.globalQue,"key"+n,t)},expression:"globalQue['key' + index]"}}),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.keywordclickenter1,expression:"keywordclickenter1"}],attrs:{placeholder:"低优先级默认"},model:{value:e.keywordValPriority,callback:function(t){e.keywordValPriority=t},expression:"keywordValPriority"}},e._l(e.options1,function(e,n){return a("el-option",{key:"audioUpG2"+n,attrs:{value:t.value}})}))],1),e._v(" "),a("div",{staticClass:"member2"},[a("span",[e._v("对应回答：")]),e._v(" "),a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"filesglopro"+n,value:"",accept:"audio/wav"}})],1)])})],2),e._v(" "),a("div",{staticClass:"open-white pro-statement type5"},[a("div",{staticClass:"top"},[a("i",{staticClass:"el-icon-caret-bottom"}),e._v("\n                        超时\n                        "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addovertime}})]),e._v(" "),e._l(e.over_time,function(t,n){return a("div",{staticClass:"list hasQuery",attrs:{index:n+1,query:9020201+n}},[a("p",[e._v("超时"+e._s(n+1)+"：")]),e._v(" "),a("div",{staticClass:"member2 overtime"},[a("span",[e._v("对应回答：")]),e._v(" "),a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"filesover"+n,value:"",accept:"audio/wav"}})],1)])}),e._v(" "),a("div",{staticClass:"list hasQuery",attrs:{query:"9020299"}},[a("p",[e._v("超时(结束)：")]),e._v(" "),a("div",{staticClass:"member2 overtime"},[a("span",[e._v("对应回答：")]),e._v(" "),a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"filestime99",value:"",accept:"audio/wav"}})],1)])],2),e._v(" "),a("div",{staticClass:"open-white pro-statement type6"},[a("div",{staticClass:"top"},[a("i",{staticClass:"el-icon-caret-bottom"}),e._v("\n                        未匹配到关键词\n                        "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addkeyword}})]),e._v(" "),e._l(e.key_word,function(t,n){return a("div",{staticClass:"list hasQuery",attrs:{index:n+1,query:9020401+n}},[a("p",[e._v("未匹配"+e._s(n+1)+"：")]),e._v(" "),a("div",{staticClass:"member2 overtime"},[a("span",[e._v("对应回答：")]),e._v(" "),a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"fileskey"+n,value:"",accept:"audio/wav"}})],1)])}),e._v(" "),a("div",{staticClass:"list hasQuery",attrs:{query:"9020499"}},[a("p",[e._v("未匹配(结束)：")]),e._v(" "),a("div",{staticClass:"member2 overtime"},[a("span",[e._v("对应回答：")]),e._v(" "),a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"filesword99",value:"",accept:"audio/wav"}})],1)])],2),e._v(" "),a("div",{staticClass:"open-white pro-statement type7"},[a("div",{staticClass:"top"},[a("i",{staticClass:"el-icon-caret-bottom"}),e._v("\n                        挽回\n                        "),a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addtosave}})]),e._v(" "),e._l(e.to_save,function(t,n){return a("div",{staticClass:"list hasQuery",attrs:{index:n+1,query:9020301+n}},[a("p",[e._v("挽回"+e._s(n+1)+"：")]),e._v(" "),a("div",{staticClass:"member2 overtime"},[a("span",[e._v("对应回答：")]),e._v(" "),a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"filesto"+n,value:"",accept:"audio/wav"}})],1)])}),e._v(" "),a("div",{staticClass:"list hasQuery",attrs:{query:"9020399"}},[a("p",[e._v("挽回(结束)：")]),e._v(" "),a("div",{staticClass:"member2 overtime"},[a("span",[e._v("对应回答：")]),e._v(" "),a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"filessave",value:"",accept:"audio/wav"}})],1)])],2),e._v(" "),a("div",{staticClass:"open-white pro-statement type8"},[e._m(1),e._v(" "),a("div",{staticClass:"list hasQuery",attrs:{query:"9020599"}},[a("p",[e._v("重复(结束)：")]),e._v(" "),a("div",{staticClass:"member2 overtime"},[a("span",[e._v("对应回答：")]),e._v(" "),a("el-input",{staticClass:"hasIpt"}),e._v(" "),a("i",{staticClass:"icon-delete"}),e._v(" "),a("i"),e._v(" "),a("i"),e._v(" "),a("input",{attrs:{type:"file",name:"filesrepeat",value:"",accept:"audio/wav"}})],1)])]),e._v(" "),a("div",{staticClass:"nextStep"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.next(),e.submitUpload()}}},[e._v("下一步")])],1)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"status"},[t("li",[this._v("模板属性")]),this._v(" "),t("li",[this._v("音频上传")]),this._v(" "),t("li",[this._v("流程定制")]),this._v(" "),t("li",[this._v("意向程度设置")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"top"},[t("i",{staticClass:"el-icon-caret-bottom"}),this._v("\n                        重复\n                        "),t("i",{staticClass:"el-icon-circle-plus-outline"})])}]};var L=a("VU/8")(E,M,!1,function(e){a("dczl")},null,null).exports,z={data:function(){return{num:0,en:"",text:"",index:0,dialogVisible:!1,dialogVal:{role:"",key:""},tableData:[{intention:"A",classification:"明确关注/邀约成功",query:0,time:"对话轮数0"},{intention:"B",classification:"有意向，需要进一步了解",query:1,time:"对话轮数0"},{intention:"C",classification:"需求不明确，兴趣不明确",query:2,time:"对话轮数0"},{intention:"D",classification:"明确拒绝",query:3,time:"对话轮数0"},{intention:"E",classification:"在忙",query:4,time:"对话轮数0"},{intention:"F",classification:"未接通",query:5,time:"对话轮数0"}]}},methods:{modify:function(e,t,a){this.en=e.intention,this.text=e.classification,this.index=e.query},sure:function(){this.tableData[this.index].time="对话轮数"+this.dialogVal.role,this.tableData[this.index].key=this.dialogVal.key},submit:function(){var e=this,t=sessionStorage.getItem("tempSeq"),a=[];this.tableData.forEach(function(e,n){a.push({intentGrade:e.intention,dialoguesNum:parseInt(e.time.split("对话轮数")[1]),tempSeq:t,keyWord:e.key})}),$.ajax({url:h+"/speechrelation/addSpeechGrade",type:"POST",contentType:"application/json",dataType:"json",async:!1,data:N()(a),success:function(t){e.$message({showClose:!0,message:"完成",type:"success"}),e.$router.push("/voiceTemplate")},error:function(e){console.log(e)}})}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"degIntention"}},[a("div",{staticClass:"header"},[a("el-header",[a("span",[e._v("配置模板")])])],1),e._v(" "),a("div",{staticClass:"bottom"},[e._m(0),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"cell-click":e.modify}},[a("el-table-column",{attrs:{prop:"intention",label:"意向"}}),e._v(" "),a("el-table-column",{attrs:{prop:"classification",label:"分类"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"流程"}}),e._v(" "),a("el-table-column",{attrs:{prop:"key",label:"命中关键词"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("修改")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"complete"},[a("el-button",{staticClass:"next-step",attrs:{type:"primary"},on:{click:e.submit}},[e._v("完成")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[e._v("\n        分类：\n        "),a("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(e.en))]),e._v(" "),a("span",[e._v(e._s(e.text))])]),e._v(" "),a("div",[e._v("\n        规则：对话轮数>="),a("el-input",{staticClass:"dialogNum",attrs:{accesskey:""},model:{value:e.dialogVal.role,callback:function(t){e.$set(e.dialogVal,"role",t)},expression:"dialogVal.role"}})],1),e._v(" "),a("div",[e._v("\n        关键词："),a("el-input",{staticClass:"dialogText",attrs:{type:"textarea",resize:"none"},model:{value:e.dialogVal.key,callback:function(t){e.$set(e.dialogVal,"key",t)},expression:"dialogVal.key"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(),e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"status"},[t("li",[this._v("模板属性")]),this._v(" "),t("li",[this._v("音频上传")]),this._v(" "),t("li",[this._v("流程定制")]),this._v(" "),t("li",[this._v("意向程度设置")])])}]};var B=a("VU/8")(z,j,!1,function(e){a("iToo")},null,null).exports,U={data:function(){return{tableData:[],dialogTableVisible:!1,frozen:!1,thaw:!1,frozenShow:!1,thawShow:!1,frozenReason:"",provinceLists:[],provinceVal:"",cityLists:[],cityVal:"",status:[{value:"启用",id:0},{value:"停用",id:1},{value:"冻结",id:2}],statusVal:"",statusNoNul:"",dialog:{lookData:!1,addRobot:!1},row:{},datumData:{},page:{pagecount:0,pagecurrent:1},data:[{label:"7天",id:6048e5},{label:"30天",id:2592e6},{label:"90天",id:7776e6},{label:"180天",id:15552e6}],ruleForm:{surplus:"",num:"",effect:"",beginTime:"",endTime:""},rules:{num:[{required:!0,message:"请填写内容",trigger:"blur"}],effect:[{required:!0,message:"请填写有效期",trigger:"blur"}],checkPass:[{required:!0,message:"请填写生效时间",trigger:"blur"}]},search:{name:"",phone:"",status:"",province:"",city:""}}},created:function(){var e=this;this.tableInit(1,10),this.$axios.post(h+"/areacode/getProvince").then(function(t){e.provinceLists=t.data}).catch(function(e){console.log(e)})},methods:{handleSizeChange:function(e){this.tableInit(1,e)},handleCurrentChange:function(e){this.tableInit(e,10)},tableInit:function(e,t){var a=this;$.ajax({url:h+"/agent/getAgentListByPage",type:"post",xhrFields:{withCredentials:!0},data:{agentName:a.search.name,agentBusinessEntityContactPhone:a.search.phone,agentStatus:a.search.status,agentProvince:a.search.province,agentCity:a.search.city,page:e,size:t},success:function(e){console.log(e),a.tableData=e.dataInfo,a.page.pagecount=e.count,a.tableData.forEach(function(e,t){e.location=e.provinceName+e.cityName,0==e.agentStatus?e.status="启用":1==e.agnetStatus?e.status="停用":2==e.agentStatus&&(e.status="冻结")})},error:function(e){console.log(e)}})},tableClick:function(e){this.row=e,console.log(e)},frozenClick:function(){this.frozenShow=!0,this.datumShow=!1},thawClick:function(){this.thawShow=!0,this.datumShow=!1},frozenSubmit:function(){var e=this;$.ajax({url:h+"/agent/updateAgentStatus",type:"post",data:{agentSeq:e.row.agentSeq,agentStatus:2,agentRemark:e.frozenReason},success:function(t){e.frozenShow=!1,e.successShow=!0,e.tableInit(1,10),e.page.pagecurrent=1},error:function(e){console.log(e)}})},thawSubmit:function(){var e=this;$.ajax({url:h+"/agent/updateAgentStatus",type:"post",data:{agentSeq:e.row.agentSeq,agentStatus:0},success:function(t){e.thawShow=!1,e.successShow=!0,e.tableInit(1,10),e.page.pagecurrent=1},error:function(e){console.log(e)}})},changeProvice:function(){var e=this,t=new URLSearchParams;t.append("areaSupCode",this.search.province),this.$axios.post(h+"/areacode/getCity",t).then(function(t){e.cityLists=t.data}).catch(function(e){console.log(e)}),""!=this.statusNoNul||this.$message({showClose:!0,message:"警告，你还没有填写状态",type:"warning"})},lookData:function(){var e=this;this.$nextTick(function(){$.ajax({url:h+"/agent/getAgentBySeq",type:"post",data:{agentSeq:e.row.agentSeq},success:function(t){console.log(t),e.datumData=t,e.datumData.area=e.datumData.provinceName+e.datumData.cityName;var a=new Date(e.datumData.agentBeginTime);e.datumData.agentBeginTime=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),0==e.datumData.agentStatus?(e.datumData.agentStatus="正常",e.frozen=!0,e.thaw=!1):2==e.datumData.agentStatus&&(e.datumData.agentStatus="冻结",e.thaw=!0,e.frozen=!1)},error:function(e){console.log(e)}})})},addTimeStamp:function(e){this.ruleForm.endTime=this.ruleForm.effect+this.ruleForm.beginTime},clearData:function(){var e=this;this.ruleForm.endTime="",this.ruleForm.effect="",this.ruleForm.beginTime="",$.ajax({url:h+"/agentrobots/getFreeRobotsCount",type:"POST",success:function(t){e.ruleForm.surplus=t},error:function(e){console.log(err)}})},submitRobot:function(e){var t=this,a=new Date(this.ruleForm.beginTime),n=new Date(this.ruleForm.endTime),o=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),s=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),l={agentSeq:this.row.agentSeq,robotsNum:this.ruleForm.num,startTime:o,allowTime:s};this.$refs[e].validate(function(e){if(!e)return t.$message({message:"未填写完整信息",type:"warning"}),!1;$.ajax({url:h+"/agentrobots/addRobots",type:"post",data:l,success:function(e){0==e?t.$message({showClose:!0,message:"成功的修改了",type:"success"}):1==e&&t.$message({showClose:!0,message:"机器人数量不足",type:"error"}),t.tableInit(1,10),t.page.pagecurrent=1},error:function(e){console.log(e)}})})},addNewAgent:function(){this.$router.push("/addNewAgent")}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"agentList"}},[a("el-header",{staticClass:"content-header"},[a("p",[e._v("代理商列表")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addNewAgent}},[e._v("新增代理")])],1),e._v(" "),a("div",{staticClass:"search"},[a("div",{staticClass:"content-ipt"},[e._v("\n            代理商名称/编号："),a("el-input",{staticClass:"agent-name",attrs:{clearable:""},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v("\n            电话："),a("el-input",{staticClass:"agent-phone",attrs:{clearable:""},model:{value:e.search.phone,callback:function(t){e.$set(e.search,"phone",t)},expression:"search.phone"}}),e._v("\n            状态："),a("el-select",{staticClass:"agent-status",model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},e._l(e.status,function(e,t){return a("el-option",{key:"agentListStatus"+t,attrs:{label:e.value,value:e.id}})})),e._v("\n            所在地区："),a("el-select",{staticClass:"agent-province",attrs:{placeholder:"省"},on:{change:e.changeProvice},model:{value:e.search.province,callback:function(t){e.$set(e.search,"province",t)},expression:"search.province"}},e._l(e.provinceLists,function(e,t){return a("el-option",{key:"agentListPro"+t,attrs:{label:e.areaName,value:e.areaId}})})),e._v(" "),a("el-select",{staticClass:"agent-city",attrs:{placeholder:"市"},model:{value:e.search.city,callback:function(t){e.$set(e.search,"city",t)},expression:"search.city"}},e._l(e.cityLists,function(e,t){return a("el-option",{key:"agentListCity"+t,attrs:{label:e.areaName,value:e.areaId}})})),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.tableInit()}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"cell-click":e.tableClick}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentSeq",label:"代理商编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentName",label:"代理商名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentBusinessEntityContactPhone",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"所在地"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercNum",label:"代理商户数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"portNum",label:"剩余机器人数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.clearData(),e.dialog.addRobot=!0}}},[e._v("增加机器人")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.lookData(),e.dialog.lookData=!0}}},[e._v("查看资料")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"代理商信息",visible:e.dialog.lookData},on:{"update:visible":function(t){e.$set(e.dialog,"lookData",t)}}},[a("div",{staticClass:"top"},[e._v("\n        商户信息\n    ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("企业名称:"+e._s(e.datumData.agentName))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("身份信息:商户")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("企业所在地:"+e._s(e.datumData.area))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("所属行业:"+e._s(e.datumData.industryName))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("营业执照号/统一社会信用代码:"+e._s(e.datumData.agentBusinessLicense))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("企业法人姓名:"+e._s(e.datumData.agentBusinessEntityName))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("企业法人身份证:"+e._s(e.datumData.agentBusinessId))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("企业联系人姓名:"+e._s(e.datumData.agentBusinessEntityContactName))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("企业联系人电话:"+e._s(e.datumData.agentBusinessEntityContactPhone))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("企业邮箱:"+e._s(e.datumData.agentBusinessMail))])],1),e._v(" "),a("div",{staticClass:"top"},[e._v("\n        图片资料\n    ")]),e._v(" "),a("img",{attrs:{src:"/static/blue-2.png",alt:""}}),e._v(" "),a("div",{staticClass:"top"},[e._v("\n        账户信息\n    ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("账户状态:"+e._s(e.datumData.agentStatus)+"\n            "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.frozen,expression:"frozen"}],attrs:{type:"primary"},on:{click:function(t){e.frozenClick(),e.dialog.lookData=!1}}},[e._v("冻结")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.thaw,expression:"thaw"}],attrs:{type:"primary"},on:{click:function(t){e.thawClick(),e.dialog.lookData=!1}}},[e._v("解冻")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("子账户数量:")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("商户入网时间:"+e._s(e.datumData.agentBeginTime))]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("套餐剩余有效期:")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("备注:"+e._s(e.datumData.frozenCause))])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.lookData=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"冻结",visible:e.frozenShow,width:"30%"},on:{"update:visible":function(t){e.frozenShow=t}}},[e._v("\n    冻结原因：\n    "),a("el-input",{attrs:{type:"textarea",resize:"none"},model:{value:e.frozenReason,callback:function(t){e.frozenReason=t},expression:"frozenReason"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.frozenShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.frozenSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"解冻",visible:e.thawShow,width:"30%"},on:{"update:visible":function(t){e.thawShow=t}}},[a("span",[e._v("是否解冻")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.thawShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.thawSubmit}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"新增机器人",visible:e.dialog.addRobot,width:"40%"},on:{"update:visible":function(t){e.$set(e.dialog,"addRobot",t)}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"可分配的机器人数量：",prop:"allotNum"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.ruleForm.surplus,callback:function(t){e.$set(e.ruleForm,"surplus",t)},expression:"ruleForm.surplus"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机器人数量：",prop:"num"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.ruleForm.num,callback:function(t){e.$set(e.ruleForm,"num",t)},expression:"ruleForm.num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机器人有效期：",prop:"effect"}},[a("el-select",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.effect,callback:function(t){e.$set(e.ruleForm,"effect",t)},expression:"ruleForm.effect"}},e._l(e.data,function(e,t){return a("el-option",{key:String(t),attrs:{label:e.label,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"生效时间："}},[a("el-date-picker",{attrs:{prop:"checkPass",type:"date",placeholder:"选择日期","value-format":"timestamp",format:"yyyy 年 MM 月 dd 日"},on:{change:e.addTimeStamp},model:{value:e.ruleForm.beginTime,callback:function(t){e.$set(e.ruleForm,"beginTime",t)},expression:"ruleForm.beginTime"}}),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.ruleForm.endTime,callback:function(t){e.$set(e.ruleForm,"endTime",t)},expression:"ruleForm.endTime"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.addRobot=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRobot("ruleForm"),e.dialog.addRobot=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes, jumper","current-page":e.page.pagecurrent,total:e.page.pagecount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"pagecurrent",t)}}})],1)},staticRenderFns:[]};var G=a("VU/8")(U,O,!1,function(e){a("NQDq")},null,null).exports,H=a("VU/8")(null,null,!1,null,null,null).exports,Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{id:"userJurisdiction"}},[a("el-header",{staticClass:"content-header"},[a("p",[e._v("用户权限管理")]),e._v(" "),a("el-button",{staticClass:"add",attrs:{type:"primary"}},[e._v("新增")]),e._v(" "),a("el-button",{staticClass:"permission-config",attrs:{type:"primary"}},[e._v("权限配置")])],1),e._v(" "),a("el-main",[a("div",{staticClass:"search"},[e._v("\n            名称/编号："),a("el-input",{attrs:{clearable:""}}),e._v("\n            用户权限角色：\n            "),a("el-select",{attrs:{placeholder:"搜索"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("el-option",{attrs:{value:2}})],1),e._v(" "),a("el-button",{attrs:{type:"danger"}},[e._v("搜索")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v("审核")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes, jumper",total:10}})],1)],1)},staticRenderFns:[]};var Y=a("VU/8")({data:function(){return{value:""}}},Q,!1,function(e){a("ACHB")},null,null).exports,W={data:function(){return{value:"",tableData:[],pageSize:10,pageNum:1,page:{pagecount:0,pagecurrent:1},search:{industry:"",industryOptions:[],template:"",templateOptions:[]}}},created:function(){var e=this;this.tableInit(1,10),this.$axios.post(h+"/sysdicttreedata/getCategory").then(function(t){e.search.industryOptions=t.data}).catch(function(e){console.log(e)})},methods:{jump:function(){this.$router.push("/templateAttribute")},handleSizeChange:function(e){this.tableInit(1,e)},handleCurrentChange:function(e){this.tableInit(e,10),console.log(e)},tableInit:function(e,t){var a=this,n=new URLSearchParams;n.append("code",this.search.industry),n.append("tempTitle",this.search.template),n.append("page",e),n.append("size",t),this.$axios.post(h+"/speechtemplate/getTemplateListByPage",n).then(function(e){a.tableData=e.data.dataInfo,a.page.pagecount=e.data.count}).catch(function(e){console.log(e)})},changeIndustry:function(e){var t=this,a=new URLSearchParams;a.append("code",e),this.$axios.post(h+"/speechtemplate/getTemplateByCode",a).then(function(e){t.search.templateOptions=e.data,console.log(e)}).catch(function(e){console.log(e)})}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"voiceTemplate"},[a("el-header",{staticClass:"content-header"},[a("p",[e._v("语音模板管理")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.jump}},[e._v("新增模板")])],1),e._v(" "),a("el-main",[a("div",{staticClass:"search"},[a("div",{staticClass:"center"},[e._v("\n                    行业类型：\n                "),a("el-select",{on:{change:e.changeIndustry},model:{value:e.search.industry,callback:function(t){e.$set(e.search,"industry",t)},expression:"search.industry"}},e._l(e.search.industryOptions,function(e,t){return a("el-option",{key:String(t),attrs:{label:e.value,value:e.value}})})),e._v("\n                    模板：\n                "),a("el-select",{model:{value:e.search.template,callback:function(t){e.$set(e.search,"template",t)},expression:"search.template"}},e._l(e.search.templateOptions,function(e,t){return a("el-option",{key:String(t),attrs:{label:e.tempTitle,value:e.tempTitle}})})),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.tableInit(1,10)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",stripe:""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tempTitle",label:"模板名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"所属行业"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercName",label:"使用用户"}})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.page.pagecurrent,layout:"total, prev, pager, next, sizes, jumper",total:e.page.pagecount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var K=a("VU/8")(W,X,!1,function(e){a("63As")},null,null).exports,J={data:function(){return{provinceLists:[],provinceVal:"",cityLists:[],cityVal:"",industryLists:[],industryVal:"",changeProName:"",changeCityName:"",changeIndName:"",proID:"",cityID:"",indID:"",fileNum:1,fileUrl:"",dialogVisible:!1,ruleForm:{name:"",province:"",city:"",industry:"",license:"",legal:"",legalID:"",linkman:"",linkmanPhone:"",email:"",provinceName:"",cityName:"",industryName:""},rules:{name:[{required:!0,message:"请输入企业名称",trigger:"blur"},{max:40,message:"长度在 0 到 40 个字符",trigger:"blur"}],industry:[{required:!0,message:"请选择行业",trigger:"change"}],license:[{required:!0,message:"请输入营业执照",trigger:"blur"},{min:15,max:18,message:"长度在 15 到 18 位",trigger:"blur"}],legal:[{required:!0,message:"请输入企业法人姓名",trigger:"blur"},{max:20,message:"最大长度20位",trigger:"blur"}],legalID:[{required:!0,message:"请输入法人身份证号",trigger:"blur"},{min:18,max:18,message:"长度18位",trigger:"blur"}],linkman:[{required:!0,message:"请输入企业联系人",trigger:"blur"},{max:20,message:"最大长度20位",trigger:"blur"}],linkmanPhone:[{required:!0,message:"请输入企业联系人电话",trigger:"blur"},{min:11,max:11,message:"请输入正确的手机号码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{max:50,type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}}},created:function(){var e=this;this.$axios.post(h+"/areacode/getProvince").then(function(t){e.provinceLists=t.data}).catch(function(e){console.log(e)}),this.$axios.get(h+"/sysdicttreedata/getCategory").then(function(t){e.industryLists=t.data}).catch(function(e){console.log(e)})},methods:{changeProvice:function(e){var t=this,a=new URLSearchParams;a.append("areaSupCode",this.ruleForm.province),this.$axios.post(h+"/areacode/getCity",a).then(function(e){t.cityLists=e.data}).catch(function(e){console.log(e)}),this.provinceLists.map(function(e,a){e.areaId==t.ruleForm.province&&(t.changeProName=e.areaName)}),console.log(t.changeProName)},changeCity:function(e){var t=this;this.cityLists.map(function(e,a){e.areaId==t.ruleForm.city&&(t.changeCityName=e.areaName)}),console.log(this.changeCityName)},changeIndustry:function(e){var t=this;this.industryLists.map(function(e,a){e.orderno==t.ruleForm.industry&&(t.changeIndName=e.value)}),console.log(this.changeIndName)},submit:function(e){var t=this,a=this,n=new FormData($("#upImgForm")[0]);$.ajax({url:h+"/upload/fileupload",type:"post",data:n,async:!1,contentType:!1,processData:!1,success:function(e){e.pop(),a.fileUrl=e.join(",")},error:function(e){console.log(e)}});var o=new URLSearchParams;o.append("agentName",this.ruleForm.name),o.append("agentProvince",this.ruleForm.province),o.append("agentCity",this.ruleForm.city),o.append("agentIndustry",this.ruleForm.industry),o.append("agentBusinessLicense",this.ruleForm.license),o.append("agentBusinessEntityName",this.ruleForm.legal),o.append("agentBusinessEntityContactName",this.ruleForm.linkman),o.append("agentBusinessEntityContactPhone",this.ruleForm.linkmanPhone),o.append("agentBusinessMail",this.ruleForm.email),o.append("agentBusinessId",this.ruleForm.legalID),o.append("provinceName",this.changeProName),o.append("cityName",this.changeCityName),o.append("industryName",this.changeIndName),o.append("agentBusinessLicensePic",this.fileUrl),this.$refs[e].validate(function(e){if(!e)return t.$message({showClose:!0,message:"数据验证错误",type:"error"}),!1;t.$axios.post(h+"/agent/addAgent",o).then(function(e){console.log(e),t.$message({showClose:!0,message:"成功的新增了",type:"success"}),t.$router.push("/agentList")}).catch(function(e){console.log(e)})})},addFile:function(){this.fileNum+=1}}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"addNewAgent"}},[e._m(0),e._v(" "),a("div",{staticClass:"addNewUser-content"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"企业名称：",prop:"name"}},[a("el-input",{attrs:{maxlength:"40"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业所在地：",prop:"area"}},[a("el-select",{attrs:{placeholder:"省",prop:"pro"},on:{change:e.changeProvice},model:{value:e.ruleForm.province,callback:function(t){e.$set(e.ruleForm,"province",t)},expression:"ruleForm.province"}},e._l(e.provinceLists,function(e,t){return a("el-option",{key:"addNewUserpro"+t,attrs:{label:e.areaName,value:e.areaId}})})),e._v(" "),a("el-select",{attrs:{placeholder:"市",prop:"city"},on:{change:e.changeCity},model:{value:e.ruleForm.city,callback:function(t){e.$set(e.ruleForm,"city",t)},expression:"ruleForm.city"}},e._l(e.cityLists,function(e,t){return a("el-option",{key:"addNewUsercit"+t,attrs:{label:e.areaName,value:e.areaId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"所在行业：",prop:"industry"}},[a("el-select",{on:{change:e.changeIndustry},model:{value:e.ruleForm.industry,callback:function(t){e.$set(e.ruleForm,"industry",t)},expression:"ruleForm.industry"}},e._l(e.industryLists,function(e,t){return a("el-option",{key:"addNewUserind"+t,attrs:{label:e.value,value:e.orderno}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"营业执照号：",prop:"license"}},[a("el-input",{model:{value:e.ruleForm.license,callback:function(t){e.$set(e.ruleForm,"license",t)},expression:"ruleForm.license"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人姓名：",prop:"legal"}},[a("el-input",{model:{value:e.ruleForm.legal,callback:function(t){e.$set(e.ruleForm,"legal",t)},expression:"ruleForm.legal"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人身份证号码：",prop:"legalID"}},[a("el-input",{attrs:{maxlength:"18"},model:{value:e.ruleForm.legalID,callback:function(t){e.$set(e.ruleForm,"legalID",t)},expression:"ruleForm.legalID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人姓名：",prop:"linkman"}},[a("el-input",{model:{value:e.ruleForm.linkman,callback:function(t){e.$set(e.ruleForm,"linkman",t)},expression:"ruleForm.linkman"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人手机号：",prop:"linkmanPhone"}},[a("el-input",{attrs:{maxlength:"11"},model:{value:e.ruleForm.linkmanPhone,callback:function(t){e.$set(e.ruleForm,"linkmanPhone",t)},expression:"ruleForm.linkmanPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),a("form",{attrs:{id:"upImgForm",autocomplete:"off",method:"post"}},[a("div",{staticClass:"uploadImg"},[e._v("\n                        资料上传：\n                        "),e._l(e.fileNum,function(t,n){return a("input",{attrs:{type:"file",name:"file"+n},on:{click:e.addFile}})})],2)]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("ruleForm")}}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{onclick:"javascript:history.back(-1)"}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"center"},[t("i",{attrs:{onclick:"javascript:history.back(-1)"}}),this._v("\n            新增用户\n        ")])])}]};var ee=a("VU/8")(J,Z,!1,function(e){a("x07M")},null,null).exports,te=a("VU/8")(null,null,!1,null,null,null).exports,ae={data:function(){return{tableData:[],dialogVisible:!1,dialogShow:!1,dialogShowValue:"",dialogAgentName:[],dialogAgentNameVal:"",dialogAgentRole:[],dialogAgentRoleVal:"",agentRoleSearchVal:"",roleName:"",nameName:"",dialogAccountNum:"",row:{},dialog:{modify:{status:!1,role:""},addAgent:{agentNameVal:"",accountNum:"",agentRoleVal:""},rewritePw:!1},page:{pagecount:0,pagecurrent:1},search:{name:""},ruleForm:{agentNameVal:"",accountNum:"",agentRoleVal:""},rules:{agentNameVal:[{required:!0,message:"请选择代理商姓名",trigger:"change"}],accountNum:[{required:!0,message:"请输入代理商账号",trigger:"blur"}],agentRoleVal:[{required:!0,message:"请选择权限角色",trigger:"change"}]}}},created:function(){var e=this;this.tableInit(1,10),this.$axios.get(h+"/agentpackage/getAgentPackageList").then(function(t){e.dialogAgentRole=t.data}).catch(function(e){console.log(e)})},methods:{changeRole:function(e){this.roleName=e},changeName:function(e){this.nameName=e,this.dialogAgentName.map(function(e){3==e.agentSeq&&console.log(e.agentBusinessEntityContactPhone)})},getRow:function(e){this.row=e,console.log(e)},handleSizeChange:function(e){this.tableInit(1,e)},handleCurrentChange:function(e){this.tableInit(e,10)},tableInit:function(e,t){var a=this,n=new URLSearchParams;n.append("agentName",this.search.name),n.append("agentPackName",this.agentRoleSearchVal),n.append("page",e),n.append("size",t),this.$axios.post(h+"/agentpackage/getAgentPackageVO",n).then(function(e){a.tableData=e.data.dataInfo,a.page.pagecount=e.data.count}).catch(function(e){console.log(e)})},addNew:function(){var e=this;this.dialogVisible=!0,this.$axios.get(h+"/agent/getNewAgent").then(function(t){e.dialogAgentName=t.data}).catch(function(e){console.log(e)})},modifyJudge:function(){var e=this;this.$nextTick(function(){null!=e.row.agentPackName?e.dialog.modify.status=!0:e.addNew()})},rewritePassWord:function(){var e=this;$.ajax({url:h+"/agent/resetPwd",type:"post",data:{agentSeq:e.row.agentSeq},success:function(t){e.dialogShow=!0},error:function(e){console.log(e)}})},modifyClick:function(){var e=this;$.ajax({url:h+"/agentpackage/updateAgentAndPackage",type:"post",data:{agentSeq:e.row.agentSeq,agentPackSeq:e.dialog.modify.role},success:function(t){e.dialog.modify.status=!1,e.tableInit(1,10),e.page.pagecurrent=1},error:function(e){console.log(e)}})},checkAccount:function(e){var t=this,a=$(".hover").attr("query");this.$refs[e].validate(function(e){if(!e)return t.$message({message:"信息验证不成功",type:"error"}),!1;$.ajax({url:h+"/agent/checkAgentLoginName",type:"POST",data:{agentLoginName:t.ruleForm.accountNum},async:!1,success:function(e){if(0==e){t.dialogVisible=!1,t.$message({message:"成功了",type:"success"});var n=new URLSearchParams;n.append("agentSeq",t.ruleForm.agentNameVal),n.append("password",t.$md5(a.slice(-6))),n.append("agentLoginName",t.ruleForm.accountNum),n.append("agentPackSeq",t.ruleForm.agentRoleVal),t.$axios.post(h+"/agentpackage/updateNewAgentPackage",n).then(function(e){t.tableInit(1,10),t.page.pagecurrent=1}).catch(function(e){console.log(e)})}else 1==e&&(t.dialogShow=!0,t.dialogShowValue="这个账号已经存在")},error:function(e){console.log(e)}})})},jump:function(){this.$router.push("/MerconfigMan")},userPower:function(){this.$router.push("/userPower")},tableRowClassName:function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":3===t?"success-row":""}}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agentPower"},[a("el-header",{staticClass:"content-header agentPowerHeader"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"1",mode:"horizontal"}},[a("el-menu-item",{attrs:{index:"1"}},[e._v("代理商权限")]),e._v(" "),a("el-menu-item",{attrs:{index:"2"},on:{click:e.userPower}},[e._v("用户权限")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addNew}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.jump}},[e._v("权限配置")])],1),e._v(" "),a("div",{staticClass:"content-ipt agentPowerContent"},[a("div",{staticClass:"center"},[e._v("\n            名称/编号：\n            "),a("el-input",{model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v("\n            代理商权限角色：\n            "),a("el-select",{model:{value:e.agentRoleSearchVal,callback:function(t){e.agentRoleSearchVal=t},expression:"agentRoleSearchVal"}},e._l(e.dialogAgentRole,function(e,t){return a("el-option",{key:"agentPowerRole1"+t,attrs:{label:e.agentPackName,value:e.agentPackName}})})),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.tableInit(1,10)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","row-class-name":e.tableRowClassName},on:{"cell-click":e.getRow}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentSeq",label:"代理商编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentName",label:"代理商名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentPackName",label:"代理商权限角色"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:e.modifyJudge}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialog.rewritePw=!0}}},[e._v("重置密码")])]}}])})],1),e._v(" "),a("el-dialog",{staticClass:"agentPowerDialog",attrs:{title:"新增代理商",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"代理商姓名：",prop:"agentNameVal"}},[a("el-select",{on:{change:e.changeName},model:{value:e.ruleForm.agentNameVal,callback:function(t){e.$set(e.ruleForm,"agentNameVal",t)},expression:"ruleForm.agentNameVal"}},e._l(e.dialogAgentName,function(e,t){return a("el-option",{key:"agentPowerDialog1"+t,attrs:{label:e.agentName,value:e.agentSeq,query:e.agentBusinessEntityContactPhone}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"代理商账号：",prop:"accountNum"}},[a("el-input",{model:{value:e.ruleForm.accountNum,callback:function(t){e.$set(e.ruleForm,"accountNum",t)},expression:"ruleForm.accountNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限角色选择：",prop:"agentRoleVal"}},[a("el-select",{on:{change:e.changeRole},model:{value:e.ruleForm.agentRoleVal,callback:function(t){e.$set(e.ruleForm,"agentRoleVal",t)},expression:"ruleForm.agentRoleVal"}},e._l(e.dialogAgentRole,function(e,t){return a("el-option",{key:"agentPowerDialog2"+t,attrs:{label:e.agentPackName,value:e.agentPackSeq}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkAccount("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"agentPowerDialog",attrs:{title:"修改权限角色",width:"40%",visible:e.dialog.modify.status},on:{"update:visible":function(t){e.$set(e.dialog.modify,"status",t)}}},[a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"代理商姓名：",prop:"agentNameVal"}},[a("el-input",{attrs:{disabled:""},model:{value:e.row.agentName,callback:function(t){e.$set(e.row,"agentName",t)},expression:"row.agentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限角色选择：",prop:"agentNameVal"}},[a("el-select",{model:{value:e.dialog.modify.role,callback:function(t){e.$set(e.dialog.modify,"role",t)},expression:"dialog.modify.role"}},e._l(e.dialogAgentRole,function(e,t){return a("el-option",{key:"agentPowerDialog2"+t,attrs:{label:e.agentPackName,value:e.agentPackSeq}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.modify.status=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.modifyClick}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",visible:e.dialogShow},on:{"update:visible":function(t){e.dialogShow=t}}},[a("span",[e._v("成功了")]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogShow=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{width:"30%",visible:e.dialog.rewritePw},on:{"update:visible":function(t){e.$set(e.dialog,"rewritePw",t)}}},[a("span",[e._v("是否重置?")]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.rewritePassWord(),e.dialog.rewritePw=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.page.pagecurrent,layout:"total, sizes, prev, pager, next, jumper",total:e.page.pagecount},on:{"update:currentPage":function(t){e.$set(e.page,"pagecurrent",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var oe=a("VU/8")(ae,ne,!1,function(e){a("L+jq")},null,null).exports,se={data:function(){return{tableData:[],pageSize:10,pageNum:1,examine:!1,examineSuc:!1,bussinessInformation:!1,textarea:"",row:{},mercCheckStatus:0,information:{},page:{pagecount:0,pagecurrent:1},search:{name:"",person:"",beginTime:"",endTime:""}}},created:function(){this.tableInit(1,10)},methods:{handleSizeChange:function(e){this.tableInit(1,e)},handleCurrentChange:function(e){this.tableInit(e,10)},tableInit:function(e,t){var a=this,n=new URLSearchParams;n.append("mercName",this.search.name),n.append("agentName",this.search.person),n.append("startTime",this.search.beginTime),n.append("endTime",this.search.endTime),n.append("page",e),n.append("size",t),this.$axios.post(h+"/merchantcheck/getMerchantCheckList",n).then(function(e){e.data.dataInfo.forEach(function(e,t){var a=new Date(e.MERC_BEGIN_TIME);e.MERC_BEGIN_TIME=a.getFullYear()+"年"+(a.getMonth()+1)+"月"+a.getDate()+"日",1==e.MERC_CHECK_STATUS?e.MERC_CHECK_STATUS="待审核":2==e.MERC_CHECK_STATUS&&(e.MERC_CHECK_STATUS="审核拒绝")}),a.tableData=e.data.dataInfo,a.page.pagecount=e.data.count}).catch(function(e){console.log(e)})},changeExamine:function(e){this.row=e},checkStatusSuccess:function(){this.mercCheckStatus=0},checkStatusFail:function(){this.mercCheckStatus=2},examineSubmit:function(){var e=this,t={mercSeq:this.row.MERC_SEQ,mercCheckStatus:this.mercCheckStatus,checkRemark:this.textarea};$.ajax({url:h+"/merchantcheck/checkMerchant",type:"post",data:t,success:function(t){e.examine=!1,e.examineSuc=!0,e.tableInit(1,10),e.page.pagecurrent=1},error:function(e){console.log(e)}})},lookInformation:function(){var e=this,t=new URLSearchParams;setTimeout(function(){t.append("mercSeq",e.row.MERC_SEQ),e.$axios.post(h+"/merchantcheck/getMerchantByMercSeq",t).then(function(t){e.information=t.data,console.log(t),e.information.area=e.information.provinceName+e.information.cityName,console.log(e.information)}).catch(function(e){console.log(e)})},500),this.$nextTick(function(){e.bussinessInformation=!0})}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"merchantExamine"},[a("el-header",[e._v("\r\n        商户审核\r\n    ")]),e._v(" "),a("el-main",[a("div",{staticClass:"search"},[a("div",{staticClass:"center"},[e._v("\r\n                企业名称/编号/关键字:\r\n                "),a("el-input",{model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v("\r\n                提交人:\r\n                "),a("el-input",{model:{value:e.search.person,callback:function(t){e.$set(e.search,"person",t)},expression:"search.person"}}),e._v("\r\n                提交审核时间:\r\n                "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.search.beginTime,callback:function(t){e.$set(e.search,"beginTime",t)},expression:"search.beginTime"}}),e._v("\r\n                至\r\n                "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.search.endTime,callback:function(t){e.$set(e.search,"endTime",t)},expression:"search.endTime"}}),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.tableInit(1,10)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((this.pageNum-1)*this.pageSize,this.pageNum*this.pageSize),"tooltip-effect":"dark",stripe:""},on:{"cell-click":e.changeExamine}},[a("el-table-column",{attrs:{prop:"MERC_SEQ",label:"用户编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"MERC_NAME",label:"用户名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"MERC_BEGIN_TIME",label:"提交审核时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"AGENT_NAME",label:"提交人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"MERC_CHECK_STATUS",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CHECK_REMARK",label:"说明"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:e.lookInformation}},[e._v("查看资料")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.examine=!0}}},[e._v("审核")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"审核",visible:e.examine,width:"20%"},on:{"update:visible":function(t){e.examine=t}}},[e._v("\r\n            审核结果: "),a("el-button",{attrs:{type:"primary",plain:"",query:0},on:{click:e.checkStatusSuccess}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",query:2},on:{click:e.checkStatusFail}},[e._v("拒绝")]),e._v(" "),a("div",[e._v("\r\n                    备注:"),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容",resize:"none"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.examine=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.examineSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"审核通过",visible:e.examineSuc,width:"20%"},on:{"update:visible":function(t){e.examineSuc=t}}},[a("span",[e._v("审核成功")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.examineSuc=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.examineSuc=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"infor",attrs:{title:"商户资料",visible:e.bussinessInformation,width:"30%"},on:{"update:visible":function(t){e.bussinessInformation=t}}},[a("div",[e._v("企业名称: "+e._s(e.information.mercName))]),e._v(" "),a("div",[e._v("企业所在地: "+e._s(e.information.area))]),e._v(" "),a("div",[e._v("所属行业: "+e._s(e.information.industryName))]),e._v(" "),a("div",[e._v("营业执照/统一社会信用代码: "+e._s(e.information.mercPwd))]),e._v(" "),a("div",[e._v("企业法人姓名: "+e._s(e.information.mercBusinessEntityName))]),e._v(" "),a("div",[e._v("企业联系人姓名: "+e._s(e.information.mercBusinessEntityContactName))]),e._v(" "),a("div",[e._v("企业联系人电话: "+e._s(e.information.mercBusinessEntityContactPhone))]),e._v(" "),a("div",[e._v("企业邮箱: "+e._s(e.information.mercBusinessMail))]),e._v(" "),a("div",[e._v("\r\n                图片资料\r\n            ")]),e._v(" "),a("div",[a("img",{attrs:{src:"/static/gray-1.png",alt:""}})])]),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.page.pagecurrent,layout:"total, prev, pager, next, sizes, jumper",total:e.page.pagecount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"pagecurrent",t)}}})],1)],1)},staticRenderFns:[]};var ie=a("VU/8")(se,le,!1,function(e){a("X5Ed")},null,null).exports,re={data:function(){return{popStop:!1,stopSuccess:!1,popStart:!1,tableData:[],equipOwnership:[{value:"总公司"}],value:"",dialogVisible:!1,ruleForm:{machineCode:"",factory:"",model:"",IP:"",port:"",ascriptionA:""},options:[{value:"8孔",id:8},{value:"16孔",id:16},{value:"32孔",id:32}],equip:[{ascription:"总公司"}],factory:[{name:"厂商a"},{name:"厂商b"}],fac:"",mod:"",asc:"",deviceCode:"",row:{},page:{pagecount:0,pagecurrent:1},search:{name:"",equipment:""},rules:{machineCode:[{required:!0,message:"请输入机器码",trigger:"blur"}],factory:[{required:!0,message:"请选择厂商",trigger:"change"}],model:[{required:!0,message:"请选择型号",trigger:"change"}],IP:[{required:!0,message:"请输入IP",trigger:"blur"}],port:[{required:!0,message:"请输入端口",trigger:"blur"}],ascriptionA:[{required:!0,message:"请选择设备归属",trigger:"change"}]}}},created:function(){this.tableInit(1,10)},methods:{handleSizeChange:function(e){this.tableInit(1,e)},handleCurrentChange:function(e){this.tableInit(e,10)},tableInit:function(e,t){var a=this,n=this,o=new URLSearchParams;o.append("deviceCode",this.search.name),o.append("deviceHome",this.search.equipment),o.append("page",e),o.append("size",t),this.$axios.post(h+"/device/getDeviceListByPage",o).then(function(e){n.tableData=e.data.dataInfo,a.page.pagecount=e.data.count,n.tableData.forEach(function(e,t){var a=new Date(e.deviceEntryTime);e.entryTime=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),0==e.deviceStatus?e.status="运行":1==e.deviceStatus?e.status="停止":2==e.deviceStatus&&(e.status="损坏")})}).catch(function(e){console.log(e)})},jump:function(){var e=this,t=$(".number.active").text();this.$nextTick(function(){sessionStorage.setItem("deviceCode",e.deviceCode);var a={deviceCode:e.deviceCode,page:parseInt(t),size:10};$.ajax({url:h+"/deviceport/searchDevicePortList",type:"POST",data:a,success:function(t){sessionStorage.setItem("jackDetailValue",N()(t.dataInfo)),sessionStorage.setItem("count",t.count),e.$router.push("/jackDetail")},error:function(e){console.log(e)}})})},cellDetail:function(e,t,a){this.deviceCode=e.deviceCode,this.row=e},facChange:function(e){this.fac=e},modChange:function(e){this.mod=e},ascriptionChange:function(e){this.asc=e},submit:function(e){var t=this,a=this,n=($(".mC input").val(),parseInt(this.mod.split("孔")[0])),o=($(".ipAddress input").val(),$(".port input").val(),{deviceCode:this.ruleForm.machineCode,deviceProName:this.ruleForm.factory,deviceModel:this.ruleForm.model,deviceIpAddr:this.ruleForm.IP,devicePort:parseInt(this.ruleForm.port),deviceHome:this.ruleForm.ascriptionA,slotNum:n});this.$refs[e].validate(function(e){if(!e)return a.$message({message:"信息验证失败",type:"error"}),!1;$.ajax({url:h+"/device/addDevice",type:"POST",dataType:"json",contentType:"application/json",data:N()(o),success:function(e){a.$message({message:"成功",type:"success"})},error:function(e){console.log(e)}}),t.dialogVisible=!1})},stop:function(){this.popStop=!0},stopSubmit:function(){var e=this,t={deviceCode:this.row.deviceCode,deviceSeq:this.row.deviceSeq};$.ajax({url:h+"/device/stopDeviceStatus",type:"post",data:t,success:function(t){e.popStop=!1,e.$message({message:"成功的停止了",type:"success"}),e.tableInit(1,10),e.page.pagecurrent=1},error:function(e){console.log(e)}})},startSubmit:function(){var e=this,t={deviceCode:this.row.deviceCode,deviceSeq:this.row.deviceSeq};$.ajax({url:h+"/device/startDeviceStatus",type:"post",data:t,success:function(t){e.$message({message:"成功的开启了",type:"success"}),e.tableInit(1,10),e.page.pagecurrent=1},error:function(e){console.log(e)}})}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"deviceManager"},[a("el-header",[e._v("\r\n        设备管理\r\n        "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\r\n            信息录入\r\n        ")])],1),e._v(" "),a("el-main",[a("div",{staticClass:"search"},[a("div",{staticClass:"center"},[e._v("\r\n                机器码:\r\n                "),a("el-input",{model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v("\r\n                设备归属:\r\n                "),a("el-select",{model:{value:e.search.equipment,callback:function(t){e.$set(e.search,"equipment",t)},expression:"search.equipment"}},e._l(e.equipOwnership,function(e,t){return a("el-option",{key:"deviceManager"+t,attrs:{label:e.value,value:e.value}})})),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.tableInit(1,10)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",stripe:""},on:{"cell-click":e.cellDetail}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceCode",label:"机器码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceProName",label:"厂家"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceModel",label:"型号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceIpAddr",label:"IP"}}),e._v(" "),a("el-table-column",{attrs:{prop:"devicePort",label:"端口"}}),e._v(" "),a("el-table-column",{attrs:{prop:"simNumnber",label:"已插入sim卡数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"workSimNum",label:"执行任务sim卡数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceHome",label:"设备所在地"}}),e._v(" "),a("el-table-column",{attrs:{prop:"entryTime",label:"录入时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:e.stop}},[e._v("停止")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.popStart=!0}}},[e._v("启动")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e.jump}},[e._v("详情")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.page.pagecurrent,layout:"total, sizes, prev, pager, next, jumper",total:e.page.pagecount},on:{"update:currentPage":function(t){e.$set(e.page,"pagecurrent",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"设备信息录入",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"机器码：",prop:"machineCode"}},[a("el-input",{model:{value:e.ruleForm.machineCode,callback:function(t){e.$set(e.ruleForm,"machineCode",t)},expression:"ruleForm.machineCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"厂商：",prop:"factory"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.facChange},model:{value:e.ruleForm.factory,callback:function(t){e.$set(e.ruleForm,"factory",t)},expression:"ruleForm.factory"}},e._l(e.factory,function(e,t){return a("el-option",{key:"factory"+t,attrs:{value:e.name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"型号：",prop:"model"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.modChange},model:{value:e.ruleForm.model,callback:function(t){e.$set(e.ruleForm,"model",t)},expression:"ruleForm.model"}},e._l(e.options,function(e,t){return a("el-option",{key:"deviceManagerModel"+t,attrs:{value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"IP：",prop:"IP"}},[a("el-input",{staticClass:"ipAddress",model:{value:e.ruleForm.IP,callback:function(t){e.$set(e.ruleForm,"IP",t)},expression:"ruleForm.IP"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口：",prop:"port"}},[a("el-input",{staticClass:"port",model:{value:e.ruleForm.port,callback:function(t){e.$set(e.ruleForm,"port",t)},expression:"ruleForm.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备归属：",prop:"ascriptionA"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.ascriptionChange},model:{value:e.ruleForm.ascriptionA,callback:function(t){e.$set(e.ruleForm,"ascriptionA",t)},expression:"ruleForm.ascriptionA"}},e._l(e.equip,function(e,t){return a("el-option",{key:"equipA"+t,attrs:{value:e.ascription}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"停止",visible:e.popStop,width:"30%"},on:{"update:visible":function(t){e.popStop=t}}},[a("span",[e._v("是否停止")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.popStop=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.stopSubmit}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"启用",visible:e.popStart,width:"30%"},on:{"update:visible":function(t){e.popStart=t}}},[a("span",[e._v("是否启动")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.popStart=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.startSubmit(),e.popStart=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"停止成功",visible:e.stopSuccess,width:"30%"},on:{"update:visible":function(t){e.stopSuccess=t}}},[a("span",[e._v("停止成功")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.stopSuccess=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.stopSuccess=!1}}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var ue=a("VU/8")(re,ce,!1,function(e){a("OcM8")},null,null).exports,pe={data:function(){return{tableData:[],relatioBroken:!1,reviseStates:!1,successDialog:!1,chooseRelation:"",chooseReviseStates:"",slotStates:"",DEVICE_CODE:"",SLOT_INDEX:"",SIM_NUM:"",SELECTMerchantName:"",reviseStatesName:"",reviseStatesInt:0,page:{pagecount:0,currentPage1:1,size:0},search:{name:"",card:"",status:"",statusList:[{value:"未启用",id:0},{value:"已启用",id:1},{value:"已损坏",id:2}]}}},created:function(){var e=JSON.parse(sessionStorage.getItem("jackDetailValue")),t=sessionStorage.getItem("count");this.page.pagecount=parseInt(t),this.tableData=e,this.tableData.forEach(function(e,t){var a=new Date(e.simEntryTime);"Invalid Date"!=a&&(e.entryTime=a.getFullYear()+"."+(a.getMonth()+1)+"."+a.getDate());var n=e.allowTime-e.startTime;"Invalid Date"!=n&&(e.remain_time=parseInt(n/1e3/3600/24)+"天","NaN天"==e.remain_time&&(e.remain_time=""));var o=new Date(e.allowTime);"Invalid Date"!=o&&(e.allow_time=o.getFullYear()+"."+(o.getMonth()+1)+"."+o.getDate()),0==e.slotStatus?e.states="未启用":1==e.slotStatus?e.states="已启用":2==e.slotStatus&&(e.states="已损坏")})},methods:{handleSizeChange:function(e){this.size=e,this.tableInit(1,e)},handleCurrentChange:function(e){this.tableInit(e,10)},tableInit:function(e,t){var a=this,n=sessionStorage.getItem("deviceCode");$.ajax({url:h+"/deviceport/getDevicePortListByPage",type:"POST",data:{search:a.search.name,slotIndex:a.search.card,slotStatus:a.search.status,deviceCode:n,page:e,size:t},success:function(e){a.tableData=e.dataInfo,a.tableData.forEach(function(e,t){var a=new Date(e.simEntryTime);"Invalid Date"!=a&&(e.entryTime=a.getFullYear()+"."+(a.getMonth()+1)+"."+a.getDate());var n=e.allowTime-e.startTime;"Invalid Date"!=n&&(e.remain_time=parseInt(n/1e3/3600/24)+"天","NaN天"==e.remain_time&&(e.remain_time=""));var o=new Date(e.allowTime);"Invalid Date"!=o&&(e.allow_time=o.getFullYear()+"."+(o.getMonth()+1)+"."+o.getDate()),0==e.slotStatus?e.states="未启用":1==e.slotStatus?e.states="已启用":2==e.slotStatus&&(e.states="已损坏")})},error:function(e){console.log(e)}})},goBack:function(){sessionStorage.removeItem("jackDetailValue")},selectMerchant:function(e){this.SELECTMerchantName=e},reviseStatesChange:function(e){this.reviseStatesName=e},relationChange:function(e){this.DEVICE_CODE=e.deviceCode,this.SLOT_INDEX=e.slotIndex,this.SIM_NUM=e.simNum},selectMerchantSubmit:function(){var e=this,t={deviceCode:this.DEVICE_CODE,slotIndex:this.SLOT_INDEX,simNum:this.SIM_NUM};"商户"==this.SELECTMerchantName?$.ajax({url:h+"/deviceport/removeMerchant",type:"POST",async:!1,data:t,success:function(t){e.$message({message:"关系成功解除",type:"success"}),e.tableInit(1,10),e.page.currentPage1=1},error:function(e){console.log(e)}}):"代理商"==this.SELECTMerchantName&&$.ajax({url:h+"/deviceport/removeAgent",type:"POST",async:!1,data:t,success:function(t){e.$message({message:"关系成功解除",type:"success"}),e.tableInit(1,10),e.page.currentPage1=1},error:function(e){console.log(e)}}),this.relatioBroken=!1},reviseStatesSubmit:function(){var e=this,t={deviceCode:this.DEVICE_CODE,slotIndex:this.SLOT_INDEX,slotStatus:this.chooseReviseStates};console.log(t),$.ajax({url:h+"/deviceport/updateSlotStatus",type:"POST",data:t,async:!1,success:function(t){0==t&&(e.$message({message:"成功的修改了",type:"success"}),e.tableInit(1,10),e.page.currentPage1=1)},error:function(e){console.log(e)}}),this.reviseStates=!1,this.successDialog=!0}}},me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"jackDetail"},[a("el-header",[a("i",{attrs:{onclick:"javascript:history.back(-1)"},on:{click:e.goBack}}),e._v("\r\n        插孔详情\r\n    ")]),e._v(" "),a("el-main",[a("div",{staticClass:"search"},[a("div",{staticClass:"center"},[e._v("\r\n                机器码/使用商户/代理商:\r\n                "),a("el-input",{model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v("\r\n                插孔编号:\r\n                "),a("el-input",{model:{value:e.search.card,callback:function(t){e.$set(e.search,"card",t)},expression:"search.card"}}),e._v("\r\n                插槽状态:\r\n                "),a("el-select",{model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},e._l(e.search.statusList,function(e,t){return a("el-option",{key:String(t),attrs:{label:e.value,value:e.id}})})),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.tableInit(1,10)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",stripe:""},on:{"cell-click":e.relationChange}},[a("el-table-column",{attrs:{prop:"deviceCode",label:"机器码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"slotIndex",label:"插孔编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentName",label:"代理商"}}),e._v(" "),a("el-table-column",{attrs:{prop:"simNum",label:"SIM卡号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"entryTime",label:"插入时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercName",label:"使用商户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remain_time",label:"剩余有效期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"allow_time",label:"到期日"}}),e._v(" "),a("el-table-column",{attrs:{prop:"states",label:"插槽状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.reviseStates=!0}}},[e._v("修改插槽状态")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.relatioBroken=!0}}},[e._v("关系解除")])]}}])})],1),e._v(" "),0!=e.page.pagecount?a("el-pagination",{attrs:{background:"","current-page":e.page.currentPage1,"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.page.pagecount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"currentPage1",t)}}}):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"关系解除",visible:e.relatioBroken,width:"30%"},on:{"update:visible":function(t){e.relatioBroken=t}}},[e._v("\r\n            选择解除关系：\r\n            "),a("el-select",{on:{change:e.selectMerchant},model:{value:e.chooseRelation,callback:function(t){e.chooseRelation=t},expression:"chooseRelation"}},[a("el-option",{attrs:{value:"商户"}}),e._v(" "),a("el-option",{attrs:{value:"代理商"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.relatioBroken=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.selectMerchantSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改插槽状态",visible:e.reviseStates,width:"30%"},on:{"update:visible":function(t){e.reviseStates=t}}},[e._v("\r\n            状态选择：\r\n            "),a("el-select",{on:{change:e.reviseStatesChange},model:{value:e.chooseReviseStates,callback:function(t){e.chooseReviseStates=t},expression:"chooseReviseStates"}},[a("el-option",{attrs:{label:"未启用",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"已启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"已损坏",value:"2"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.reviseStates=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.reviseStatesSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改插槽状态",visible:e.successDialog,width:"30%"},on:{"update:visible":function(t){e.successDialog=t}}},[a("span",[e._v("你已经成功的修改了状态")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.successDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.successDialog=!1}}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var de=a("VU/8")(pe,me,!1,function(e){a("ufYN")},null,null).exports,ve={data:function(){return{tableData:[],saveInformation:!1,machineOccupy:!1,unite:!1,uniteFail:!1,uniteSuccess:!1,stop:!1,stopFail:!1,stopSuccess:!1,ruleForm:{ascriptionSIM:"",SIMCard:"",selectMachine:"",jackNum:""},ascription_SIM:[],machine_List:[],jackList:[],cellList:{},page:{pagecurrent:1,pagecount:0},search:{name:"",code:"",number:""},rules:{ascriptionSIM:[{required:!0,message:"请选择sim归属",trigger:"change"}],SIMCard:[{required:!0,message:"sim卡号",trigger:"blur"}],selectMachine:[{required:!0,message:"请选择机器",trigger:"change"}],jackNum:[{required:!0,message:"请选择插孔编号",trigger:"change"}]}}},created:function(){var e=this;this.tableInit(1,10),this.$axios.get(h+"/merchant/getMerchantList").then(function(t){e.ascription_SIM=t.data}).catch(function(e){console.log(e)})},methods:{handleSizeChange:function(e){this.tableInit(1,e)},handleCurrentChange:function(e){this.tableInit(e,10),console.log(this.page.pagecurrent)},SIM_simChange:function(){this.ruleForm.selectMachine="",this.ruleForm.jackNum="";var e=this,t={mercSeq:parseInt(this.ruleForm.ascriptionSIM)};$.ajax({url:h+"/sim/getDeviceByMercSeq",type:"POST",data:t,success:function(t){e.machine_List=t},error:function(e){console.log(e)}})},tableInit:function(e,t){var a=this,n=this,o=new URLSearchParams;o.append("simNum",this.search.name),o.append("simMachineCode",this.search.code),o.append("simHubIndex",this.search.number),o.append("page",e),o.append("size",t),this.$axios.post(h+"/sim/getSimVOListByPage",o).then(function(e){n.tableData=e.data.dataInfo,a.page.pagecount=e.data.count,n.tableData.forEach(function(e,t){var a=new Date(e.simEntryTime);e.entry_time=a.getFullYear()+"年"+(a.getMonth()+1)+"月"+a.getDate()+"日";var n=new Date(e.agentAllowTime);e.agentAllow_time=n.getFullYear()+"年"+(n.getMonth()+1)+"月"+n.getDate()+"日";var o=new Date(e.mercAllowTime);e.mercAllow_time=o.getFullYear()+"年"+(o.getMonth()+1)+"月"+o.getDate()+"日",0==e.simStatus?e.states="未启用":1==e.simStatus?e.states="已启用":2==e.simStatus&&(e.states="已损坏")})}).catch(function(e){console.log(e)})},SIM_machineChange:function(){var e=this,t={mercSeq:parseInt(this.ruleForm.ascriptionSIM),deviceCode:this.ruleForm.selectMachine};$.ajax({url:h+"/sim/getPortByDevice",type:"POST",data:t,success:function(t){e.jackList=t},error:function(e){console.log(e)}})},submit:function(e){var t=this,a={mercSeq:this.ruleForm.ascriptionSIM,simNum:this.ruleForm.SIMCard,simMachineCode:this.ruleForm.selectMachine,simHubIndex:this.ruleForm.jackNum};this.$refs[e].validate(function(e){if(!e)return t.$message({message:"信息验证不成功",type:"error"}),!1;$.ajax({url:h+"/sim/addSimInfo",type:"POST",data:a,success:function(e){console.log(e),t.saveInformation=!1,1==e?t.$message({message:"添加失败（可能原因：1:sim号已存在，2:端口已被占用）",type:"warning"}):0==e&&(t.$message({message:"成功",type:"success"}),t.tableInit(1,10),this.page.pagecurrent=1)},error:function(e){console.log(e)}})})},popUnit:function(){var e=this;this.$nextTick(function(){$.ajax({url:h+"/sim/deleteSimCheck",type:"POST",data:{simNum:e.cellList.simNum},success:function(t){0==t?(e.unite=!0,e.tableInit(1,10),e.page.pagecurrent=1):1==t&&(e.uniteFail=!0)},error:function(e){console.log(e)}})})},uniteChange:function(e){this.cellList=e},uniteSubmit:function(){var e=this,t={simNum:this.cellList.simNum,simMachineCode:this.cellList.simMachineCode,simHubIndex:this.cellList.simHubIndex};$.ajax({url:h+"/sim/deleteSim",type:"POST",data:t,success:function(t){0==t&&(e.unite=!1,e.uniteSuccess=!0,e.tableInit(1,10),e.page.pagecurrent=1)},error:function(e){console.log(e)}})},popStop:function(){var e=this;this.$nextTick(function(){$.ajax({url:h+"/sim/deleteSimCheck",type:"POST",data:{simNum:e.cellList.simNum},success:function(t){0==t?e.stop=!0:1==t&&(e.stopFail=!0)},error:function(e){console.log(e)}})})},stopSubmit:function(){var e=this,t={simNum:this.cellList.simNum,simMachineCode:this.cellList.simMachineCode,simHubIndex:this.cellList.simHubIndex};$.ajax({url:h+"/sim/stopSim",type:"POST",data:t,success:function(t){0==t&&(e.stop=!1,e.stopFail=!1,e.stopSuccess=!0,e.tableInit(1,10),e.page.pagecurrent=1)},error:function(e){console.log(e)}})}}},he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"simCard"},[a("el-header",[e._v("\r\n        sim卡管理\r\n        "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveInformation=!0}}},[e._v("\r\n            信息录入\r\n        ")])],1),e._v(" "),a("el-main",[a("div",{staticClass:"search"},[a("div",{staticClass:"center"},[e._v("\r\n                sim卡号:\r\n                "),a("el-input",{model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v("\r\n                机器码:\r\n                "),a("el-input",{model:{value:e.search.code,callback:function(t){e.$set(e.search,"code",t)},expression:"search.code"}}),e._v("\r\n                插孔编号:\r\n                "),a("el-input",{model:{value:e.search.number,callback:function(t){e.$set(e.search,"number",t)},expression:"search.number"}}),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.tableInit(1,10)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",stripe:""},on:{"cell-click":e.uniteChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"simNum",label:"sim卡号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"simMachineCode",label:"所属机器码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"simHubIndex",label:"插孔编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercName",label:"使用商户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"entry_time",label:"录入时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentAllow_time",label:"代理商到期日"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercAllow_time",label:"商户到期日"}}),e._v(" "),a("el-table-column",{attrs:{prop:"waitTask",label:"待执行任务"}}),e._v(" "),a("el-table-column",{attrs:{prop:"overTask",label:"已执行任务"}}),e._v(" "),a("el-table-column",{attrs:{prop:"states",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:e.popStop}},[e._v("停止")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e.popUnit}},[e._v("解绑")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"sim卡录入",visible:e.saveInformation,width:"30%"},on:{"update:visible":function(t){e.saveInformation=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"SIM卡归属：",prop:"ascriptionSIM"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.SIM_simChange},model:{value:e.ruleForm.ascriptionSIM,callback:function(t){e.$set(e.ruleForm,"ascriptionSIM",t)},expression:"ruleForm.ascriptionSIM"}},e._l(e.ascription_SIM,function(e,t){return a("el-option",{key:"ascription_SIM"+t,attrs:{value:e.mercSeq,label:e.mercName}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"SIM卡卡号：",prop:"SIMCard"}},[a("el-input",{model:{value:e.ruleForm.SIMCard,callback:function(t){e.$set(e.ruleForm,"SIMCard",t)},expression:"ruleForm.SIMCard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择机器：",prop:"selectMachine"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.SIM_machineChange},model:{value:e.ruleForm.selectMachine,callback:function(t){e.$set(e.ruleForm,"selectMachine",t)},expression:"ruleForm.selectMachine"}},e._l(e.machine_List,function(e,t){return a("el-option",{key:"machine_List"+t,attrs:{value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"插孔编号：",prop:"jackNum"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.jackNum,callback:function(t){e.$set(e.ruleForm,"jackNum",t)},expression:"ruleForm.jackNum"}},e._l(e.jackList,function(e,t){return a("el-option",{key:"jackList"+t,attrs:{value:e}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.saveInformation=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.machineOccupy,width:"30%"},on:{"update:visible":function(t){e.machineOccupy=t}}},[a("span",[e._v("机器端口被占用")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.machineOccupy=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.machineOccupy=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"关系解除",visible:e.unite,width:"30%"},on:{"update:visible":function(t){e.unite=t}}},[a("span",[e._v("确定要解绑吗")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.unite=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.uniteSubmit}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"关系解除失败",visible:e.uniteFail,width:"30%"},on:{"update:visible":function(t){e.uniteFail=t}}},[a("span",[e._v("该卡正在执行任务，解绑失败！！")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.uniteFail=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.uniteFail=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"关系解除",visible:e.uniteSuccess,width:"30%"},on:{"update:visible":function(t){e.uniteSuccess=t}}},[a("span",[e._v("解绑成功了")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.uniteSuccess=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.uniteSuccess=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"停止",visible:e.stop,width:"30%"},on:{"update:visible":function(t){e.stop=t}}},[a("span",[e._v("确定要停止吗")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.stop=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.stopSubmit}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"停止失败",visible:e.stopFail,width:"30%"},on:{"update:visible":function(t){e.stopFail=t}}},[a("span",[e._v("该卡正在执行任务，是否强制停止！！")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.stopFail=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.stopSubmit}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"停止成功",visible:e.stopSuccess,width:"30%"},on:{"update:visible":function(t){e.stopSuccess=t}}},[a("span",[e._v("停止成功！！")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.stopSuccess=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.stopSuccess=!1}}},[e._v("确 定")])],1)]),e._v(" "),0!=e.page.pagecount?a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.page.pagecurrent,total:e.page.pagecount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"pagecurrent",t)}}}):e._e()],1),e._v(" "),a("el-footer")],1)},staticRenderFns:[]};var ge=a("VU/8")(ve,he,!1,function(e){a("tH49")},null,null).exports,fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"dialManager"},[a("el-header",[e._v("\r\n        拨号管理\r\n    ")]),e._v(" "),a("el-main",[a("div",{staticClass:"search"},[a("div",{staticClass:"center"},[e._v("\r\n                商户名称/编号:\r\n                "),a("el-input"),e._v(" "),a("span",[e._v("高级搜索:")]),e._v(" "),a("el-button",{attrs:{type:"danger"}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"toggle"},[e._v("\r\n                客户电话:\r\n                "),a("el-input"),e._v("\r\n                意向:\r\n                "),a("el-select",[a("el-option")],1),e._v("\r\n                拨号号码:\r\n                "),a("el-select",[a("el-option")],1),e._v("\r\n                最后拨打时间:\r\n                "),a("el-input"),e._v("\r\n                至\r\n                "),a("el-input",{staticStyle:{"margin-left":"20px"}}),e._v(" "),a("el-button",{attrs:{type:"danger"}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("导出")])],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",stripe:""}},[a("el-table-column",{attrs:{prop:"agentSeq",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentName",label:"被叫信息"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentBusinessEntityContactPhone",label:"意向"}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"通话记录"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mercNum",label:"拨打时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"portNum",label:"拨打模板"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"主叫号码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"portNum",label:"主叫商户"}})],1)],1)],1)},staticRenderFns:[]};var _e=a("VU/8")({},fe,!1,function(e){a("1eLg")},null,null).exports,be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"moduleManager"},[a("el-header",[e._v("\r\n        模组管理\r\n        "),a("el-button",{attrs:{type:"danger"}},[e._v("\r\n            新增\r\n        ")])],1),e._v(" "),a("el-main",[a("div",{staticClass:"lists"},[a("span",{staticClass:"active"},[e._v("大后台")]),e._v(" "),a("span",[e._v("代理商后台")]),e._v(" "),a("span",[e._v("商户后台")])]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",stripe:""}},[a("el-table-column",{attrs:{prop:"agentSeq",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentName",label:"组名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentBusinessEntityContactPhone",label:"路径"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("修改")])]}}])})],1)],1)],1)},staticRenderFns:[]};var ye=a("VU/8")({},be,!1,function(e){a("iyHF")},null,null).exports,ke=a("VU/8")(null,null,!1,null,null,null).exports,we=a("bOdI"),Ce=a.n(we),Se={data:function(){var e;return{treeList:[],defaultProps:{children:"tblAgentAAuthList",label:"agentAuthName"},editChecked:[],editChecked1:[],name:"",topBtnGroupForm:{name:""},edit:!1,newAdd:!1,tableData:[],tableCount:0,currentPage:1,editForm:(e={checkedTel:[],telArr:[],telOptions:[]},Ce()(e,"checkedTel",[]),Ce()(e,"checkAll",!1),Ce()(e,"isIndeterminate",!0),e),editMercSeq:"",newAddForm:{name:"",desc:""},newAddBtn:!0,row:{}}},mounted:function(){this.tableInit()},methods:{aa:function(){this.newAddBtn&&(this.newAddForm.name="")},returnRouter:function(){this.$router.push("/agentPower")},idconfig:function(){this.$router.push("/idConfig")},changeRow:function(e){this.row=e,console.log(e)},lookTree:function(){var e=this;this.editChecked=[],this.$nextTick(function(){var t={agentPackSeq:e.row.agentPackSeq};g("/agentauth/getAgentAuthByPackage","post",t).then(function(t){t.map(function(t,a){0!=t.agentAuthParentSeq&&e.editChecked.push(t.agentAuthSeq)}),g("/agentauth/getAuthList","get").then(function(t){t.forEach(function(e,t){e.tblAgentAAuthList.forEach(function(e,t){e.disabled=!0})}),e.treeList=t}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})})},modifyTree:function(){var e=this;this.editChecked=[],this.$nextTick(function(){var t={agentPackSeq:e.row.agentPackSeq};g("/agentauth/getAgentAuthByPackage","post",t).then(function(t){t.map(function(t,a){0!=t.agentAuthParentSeq&&e.editChecked.push(t.agentAuthSeq)}),g("/agentauth/getAuthList","get").then(function(t){e.treeList=t}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})})},handleCurrentChange:function(e){this.tableInit(e)},tableInit:function(){var e=this,t=new URLSearchParams;t.append("agentPackName",this.topBtnGroupForm.name),this.$axios.post(h+"/agentpackage/searchAgentPackageList",t).then(function(t){e.tableData=t.data}).catch(function(e){console.log(e)})},search:function(){var e=this,t=this,a={name:this.topBtnGroupForm.name};g("/merchantpackage/mercPermissionCfg","post",a).then(function(a){0==a.resultCode?(t.tableCount=a.count,t.tableData=a.dataInfo,t.currentPage=1):e.$message({type:"error",message:"表格数据初始化有误"})})},editConfirm:function(){this.editMercSeq;var e=[];if(this.$refs.tree1.getCheckedNodes().forEach(function(t,a){e.push(t.agentAuthSeq)}),e.length>0){var t={agentPackSeq:this.row.agentPackSeq,agentAuthSeq:e};$.ajax({url:h+"/agentpackage/editPackageAuth",type:"post",dataType:"json",xhrFields:{withCredentials:!0},contentType:"application/json",data:N()(t),success:function(e){console.log(e)},error:function(e){console.log(e)}})}else this.$message({type:"error",message:"至少选择一个功能模块"})},newAddConfirm:function(){this.newAddBtn=!1;var e=this.$refs.tree3.getCheckedNodes(),t=[],a=this.newAddForm.name,n=this.newAddForm.desc;if(e.forEach(function(e,a){t.push(e.agentAuthSeq)}),a)if(t.length>0){var o={agentPackName:a,agentAuthSeq:t,agentPackDesc:n};$.ajax({url:h+"/agentpackage/addAgentPackage",type:"post",dataType:"json",xhrFields:{withCredentials:!0},contentType:"application/json",data:N()(o),success:function(e){console.log(e)},error:function(e){console.log(e)}})}else this.$message({type:"error",message:"至少选择一个功能模块"}),this.newAdd=!0;else this.$message({type:"error",message:"请输入角色名称"}),this.newAdd=!0}}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"},attrs:{id:"MerConfigMan"}},[a("div",{staticClass:"main-hd"},[a("div",{staticClass:"hd-title"},[a("div",{staticClass:"icon-return",on:{click:e.returnRouter}}),e._v("代理商权限配置")]),e._v(" "),a("div",{staticClass:"hd-btnGroup"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.modifyTree(),e.newAdd=!0}}},[e._v("新增权限角色")])],1)]),e._v(" "),a("div",{staticClass:"top-btnGroup"},[a("el-form",{ref:"topBtnGroup",attrs:{inline:!0,model:e.topBtnGroupForm}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"角色名称："}},[a("el-input",{attrs:{clearable:""},model:{value:e.topBtnGroupForm.name,callback:function(t){e.$set(e.topBtnGroupForm,"name",t)},expression:"topBtnGroupForm.name"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tableInit()}}},[e._v("搜 索")])],1)],1),e._v(" "),a("div",{staticClass:"main-table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"cell-click":e.changeRow}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentPackSeq",label:"代理商套餐编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentPackName",label:"代理商套餐名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"代理商套餐权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.lookTree(),e.edit=!0}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.modifyTree(),e.edit=!0}}},[e._v("修改")])]}}])})],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog checked",attrs:{title:"新增权限角色",visible:e.newAdd,width:"400px"},on:{"update:visible":function(t){e.newAdd=t},open:e.aa}},[a("el-form",{attrs:{model:e.newAddForm}},[a("el-form-item",{staticStyle:{"margin-bottom":"6px"},attrs:{label:"角色名称："}},[a("el-input",{staticStyle:{width:"256px"},attrs:{clearable:""},model:{value:e.newAddForm.name,callback:function(t){e.$set(e.newAddForm,"name",t)},expression:"newAddForm.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"6px"},attrs:{label:"角色描述："}},[a("el-input",{staticStyle:{width:"256px"},attrs:{clearable:""},model:{value:e.newAddForm.desc,callback:function(t){e.$set(e.newAddForm,"desc",t)},expression:"newAddForm.desc"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"6px"}},[a("div",[e._v("请选择功能模块：")])]),e._v(" "),a("el-form-item",[a("el-tree",{ref:"tree3",attrs:{data:e.treeList,"show-checkbox":"","highlight-current":"","default-expand-all":"","node-key":"authSeq","default-checked-keys":e.editChecked1,props:e.defaultProps}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.newAdd=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.newAdd=!1,e.newAddConfirm()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog checked",attrs:{title:"代理商权限配置",visible:e.edit,width:"400px"},on:{"update:visible":function(t){e.edit=t}}},[a("el-form",{attrs:{model:e.editForm}},[a("el-form-item",{staticStyle:{"margin-bottom":"6px"}},[a("div",[e._v("请选择功能模块：")])]),e._v(" "),a("el-form-item",[a("el-tree",{ref:"tree1",attrs:{data:e.treeList,"show-checkbox":"","highlight-current":"","default-expand-all":"","node-key":"agentAuthSeq","default-checked-keys":e.editChecked,props:e.defaultProps}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.edit=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.edit=!1,e.editConfirm()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Fe=a("VU/8")(Se,xe,!1,function(e){a("HETq")},null,null).exports,Ne={data:function(){return{tableData:[],dialogVisible:!1,dialogShow:!1,dialogShowValue:"",dialogAgentName:[],dialogAgentNameVal:"",dialogAgentRole:[],dialogAgentRoleVal:"",agentRoleSearchVal:"",roleName:"",nameName:"",dialogAccountNum:"",row:{},search:{name:""},dialog:{modify:{status:!1,role:"",name:"",accountNum:""},addAgent:{agentNameVal:"",accountNum:"",agentRoleVal:"",userPw:""},rewritePw:!1},ruleForm:{agentNameVal:"",accountNum:"",agentRoleVal:"",userPw:""},rules:{agentNameVal:[{required:!0,message:"请输入用户姓名",trigger:"blur"}],accountNum:[{required:!0,message:"请输入用户账号",trigger:"blur"}],agentRoleVal:[{required:!0,message:"请选择用户角色",trigger:"change"}],userPw:[{required:!0,message:"请输入用户密码",trigger:"blur"}]}}},created:function(){var e=this;this.tableInit(),this.$axios.get(h+"/usergroup/getUserGroupList").then(function(t){e.dialogAgentRole=t.data}).catch(function(e){console.log(e)})},methods:{changeRole:function(e){this.roleName=e},changeName:function(e){this.nameName=e,this.dialogAgentName.map(function(e){3==e.agentSeq&&console.log(e.agentBusinessEntityContactPhone)})},getRow:function(e){this.row=e,console.log(e)},tableInit:function(){var e=this,t=new URLSearchParams;t.append("userName",this.search.name),t.append("groupName",this.agentRoleSearchVal),this.$axios.post(h+"/usergroup/getUserGroupVOList",t).then(function(t){e.tableData=t.data}).catch(function(e){console.log(e)})},rewritePassWord:function(){var e=this;$.ajax({url:h+"/user/resetPwd",type:"post",data:{userSeq:e.row.userSeq},success:function(t){e.dialogShow=!0},error:function(e){console.log(e)}})},addAccountNum:function(){var e=this;this.$nextTick(function(){$.ajax({url:h+"/user/getUserByUserSeq",type:"post",data:{userSeq:e.row.userSeq},success:function(t){e.dialog.modify.accountNum=t.userName,e.dialog.modify.name=t.realName},error:function(e){console.log(e)}})})},modifyClick:function(){var e=this,t={userSeq:this.row.userSeq,realName:this.dialog.modify.name,groupId:this.dialog.modify.role};$.ajax({url:h+"/user/editUser",type:"post",data:t,success:function(t){0==t&&(e.dialog.modify.status=!1,e.dialogShow=!0)},error:function(e){console.log(e)}})},checkAccount:function(e){var t=this;t.dialogVisible=!1;var a=new URLSearchParams;a.append("realName",t.ruleForm.agentNameVal),a.append("userName",t.ruleForm.accountNum),a.append("userPwd",t.$md5(t.ruleForm.userPw)),a.append("groupId",t.ruleForm.agentRoleVal),this.$refs[e].validate(function(e){if(!e)return t.$message({message:"信息验证不成功",type:"error"}),!1;t.$axios.post(h+"/user/addUser",a).then(function(e){t.$message({message:"成功了",type:"success"}),t.$axios.get(h+"/usergroup/getUserGroupVOList").then(function(e){t.tableData=e.data}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})})},jump:function(){this.$router.push("/permissionConfig")},agentPower:function(){this.$router.push("/agentPower")},tableRowClassName:function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":3===t?"success-row":""}}},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userPower"},[a("el-header",{staticClass:"content-header agentPowerHeader"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"2",mode:"horizontal"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:e.agentPower}},[e._v("代理商权限")]),e._v(" "),a("el-menu-item",{attrs:{index:"2"}},[e._v("用户权限")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.jump}},[e._v("权限配置")])],1),e._v(" "),a("div",{staticClass:"content-ipt agentPowerContent"},[a("div",{staticClass:"center"},[e._v("\n            名称/编号：\n            "),a("el-input",{attrs:{clearable:""},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v("\n            用户权限角色：\n            "),a("el-select",{model:{value:e.agentRoleSearchVal,callback:function(t){e.agentRoleSearchVal=t},expression:"agentRoleSearchVal"}},e._l(e.dialogAgentRole,function(e,t){return a("el-option",{key:"agentPowerRole1"+t,attrs:{label:e.groupName,value:e.groupName}})})),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.tableInit}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","row-class-name":e.tableRowClassName},on:{"cell-click":e.getRow}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userSeq",label:"用户编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"用户权限角色"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.addAccountNum(),e.dialog.modify.status=!0}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialog.rewritePw=!0}}},[e._v("重置密码")])]}}])})],1),e._v(" "),a("el-dialog",{staticClass:"agentPowerDialog",attrs:{title:"新增用户",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"用户姓名：",prop:"agentNameVal"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.agentNameVal,callback:function(t){e.$set(e.ruleForm,"agentNameVal",t)},expression:"ruleForm.agentNameVal"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户账号：",prop:"accountNum"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.accountNum,callback:function(t){e.$set(e.ruleForm,"accountNum",t)},expression:"ruleForm.accountNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户密码：",prop:"userPw"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.userPw,callback:function(t){e.$set(e.ruleForm,"userPw",t)},expression:"ruleForm.userPw"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户角色选择：",prop:"agentRoleVal"}},[a("el-select",{on:{change:e.changeRole},model:{value:e.ruleForm.agentRoleVal,callback:function(t){e.$set(e.ruleForm,"agentRoleVal",t)},expression:"ruleForm.agentRoleVal"}},e._l(e.dialogAgentRole,function(e,t){return a("el-option",{key:"agentPowerDialog2"+t,attrs:{label:e.groupName,value:e.groupId}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkAccount("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"agentPowerDialog",attrs:{title:"修改权限角色",width:"40%",visible:e.dialog.modify.status},on:{"update:visible":function(t){e.$set(e.dialog.modify,"status",t)}}},[a("div",{staticClass:"name"},[e._v("\n        用户账号：\n        "),a("el-input",{attrs:{disabled:""},model:{value:e.dialog.modify.accountNum,callback:function(t){e.$set(e.dialog.modify,"accountNum",t)},expression:"dialog.modify.accountNum"}})],1),e._v(" "),a("div",{staticClass:"name"},[e._v("\n        用户姓名：\n        "),a("el-input",{attrs:{clearable:""},model:{value:e.dialog.modify.name,callback:function(t){e.$set(e.dialog.modify,"name",t)},expression:"dialog.modify.name"}})],1),e._v(" "),a("div",{staticClass:"name"},[e._v("\n        权限角色选择：\n        "),a("el-select",{model:{value:e.dialog.modify.role,callback:function(t){e.$set(e.dialog.modify,"role",t)},expression:"dialog.modify.role"}},e._l(e.dialogAgentRole,function(e,t){return a("el-option",{key:"agentPowerDialog2"+t,attrs:{label:e.groupName,value:e.groupId}})}))],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.modify.status=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.modifyClick}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{width:"30%",visible:e.dialogShow},on:{"update:visible":function(t){e.dialogShow=t}}},[a("span",[e._v("成功了")]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogShow=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{width:"30%",visible:e.dialog.rewritePw},on:{"update:visible":function(t){e.$set(e.dialog,"rewritePw",t)}}},[a("span",[e._v("是否重置?")]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.rewritePassWord(),e.dialog.rewritePw=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Ie=a("VU/8")(Ne,$e,!1,function(e){a("pTAt")},null,null).exports,Ve={data:function(){var e;return{treeList:[],defaultProps:{children:"tblAuthResourceList",label:"resName"},editChecked:[],editChecked1:[],name:"",topBtnGroupForm:{name:""},edit:!1,newAdd:!1,tableData:[],tableCount:0,currentPage:1,editForm:(e={checkedTel:[],telArr:[],telOptions:[]},Ce()(e,"checkedTel",[]),Ce()(e,"checkAll",!1),Ce()(e,"isIndeterminate",!0),e),editMercSeq:"",newAddForm:{name:""},newAddBtn:!0,row:{}}},mounted:function(){this.tableInit()},methods:{aa:function(){this.newAddBtn&&(this.newAddForm.name="")},returnRouter:function(){this.$router.push("/agentPower")},idconfig:function(){this.$router.push("/idConfig")},changeRow:function(e){this.row=e,console.log(e)},lookTree:function(){var e=this;this.editChecked=[],this.$nextTick(function(){var t={groupId:e.row.groupId};g("/userresource/getResListByGroupId","post",t).then(function(t){t.forEach(function(t,a){e.editChecked.push(t.resSeq)}),console.log(e.editChecked),g("/userresource/getAuthList","get").then(function(t){t.forEach(function(e,t){e.tblAuthResourceList.forEach(function(e,t){e.disabled=!0})}),e.treeList=t}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})})},modifyTree:function(){var e=this;this.editChecked=[],this.$nextTick(function(){var t={groupId:e.row.groupId};g("/userresource/getResListByGroupId","post",t).then(function(t){t.forEach(function(t,a){e.editChecked.push(t.resSeq)}),console.log(e.editChecked),g("/userresource/getAuthList","get").then(function(t){e.treeList=t}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})})},handleCurrentChange:function(e){this.tableInit(e)},tableInit:function(){var e=this,t=new URLSearchParams;t.append("groupName",this.topBtnGroupForm.name),this.$axios.post(h+"/usergroup/searchUserGroupList",t).then(function(t){e.tableData=t.data}).catch(function(e){console.log(e)})},search:function(){var e=this,t=this,a={name:this.topBtnGroupForm.name};g("/merchantpackage/mercPermissionCfg","post",a).then(function(a){0==a.resultCode?(t.tableCount=a.count,t.tableData=a.dataInfo,t.currentPage=1):e.$message({type:"error",message:"表格数据初始化有误"})})},editConfirm:function(){this.editMercSeq;var e=[];if(this.$refs.tree1.getCheckedNodes().forEach(function(t,a){e.push(t.resSeq)}),console.log(e),e.length>0){var t={groupId:this.row.groupId,resSeq:e};$.ajax({url:h+"/usergroup/editGroupAuth",type:"post",dataType:"json",xhrFields:{withCredentials:!0},contentType:"application/json",data:N()(t),success:function(e){console.log(e)},error:function(e){console.log(e)}})}else this.$message({type:"error",message:"至少选择一个功能模块"})},newAddConfirm:function(){this.newAddBtn=!1;var e=this.$refs.tree3.getCheckedNodes(),t=[],a=this.newAddForm.name;if(e.forEach(function(e,a){t.push(e.resSeq)}),a)if(t.length>0){var n={groupName:a,resSeq:t};$.ajax({url:h+"/usergroup/addUserGroup",type:"post",dataType:"json",xhrFields:{withCredentials:!0},contentType:"application/json",data:N()(n),success:function(e){console.log(e)},error:function(e){console.log(e)}})}else this.$message({type:"error",message:"至少选择一个功能模块"}),this.newAdd=!0;else this.$message({type:"error",message:"请输入角色名称"}),this.newAdd=!0}}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"},attrs:{id:"userPermissionConfig"}},[a("div",{staticClass:"main-hd"},[a("div",{staticClass:"hd-title"},[a("div",{staticClass:"icon-return",on:{click:e.returnRouter}}),e._v("用户权限配置")]),e._v(" "),a("div",{staticClass:"hd-btnGroup"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.modifyTree(),e.newAdd=!0}}},[e._v("新增权限角色")])],1)]),e._v(" "),a("div",{staticClass:"top-btnGroup"},[a("el-form",{ref:"topBtnGroup",attrs:{inline:!0,model:e.topBtnGroupForm}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"角色名称："}},[a("el-input",{attrs:{clearable:""},model:{value:e.topBtnGroupForm.name,callback:function(t){e.$set(e.topBtnGroupForm,"name",t)},expression:"topBtnGroupForm.name"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.tableInit}},[e._v("搜 索")])],1)],1),e._v(" "),a("div",{staticClass:"main-table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"cell-click":e.changeRow}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupId",label:"用户套餐编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"用户套餐名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户套餐权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.lookTree(),e.edit=!0}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.modifyTree(),e.edit=!0}}},[e._v("修改")])]}}])})],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog checked",attrs:{title:"新增权限角色",visible:e.newAdd,width:"400px"},on:{"update:visible":function(t){e.newAdd=t},open:e.aa}},[a("el-form",{attrs:{model:e.newAddForm}},[a("el-form-item",{staticStyle:{"margin-bottom":"6px"},attrs:{label:"角色名称："}},[a("el-input",{staticStyle:{width:"256px"},attrs:{clearable:""},model:{value:e.newAddForm.name,callback:function(t){e.$set(e.newAddForm,"name",t)},expression:"newAddForm.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"6px"}},[a("div",[e._v("请选择功能模块：")])]),e._v(" "),a("el-form-item",[a("el-tree",{ref:"tree3",attrs:{data:e.treeList,"show-checkbox":"","highlight-current":"","default-expand-all":"","node-key":"resSeq","default-checked-keys":e.editChecked1,props:e.defaultProps}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.newAdd=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.newAdd=!1,e.newAddConfirm()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog checked",attrs:{title:"用户权限配置",visible:e.edit,width:"400px"},on:{"update:visible":function(t){e.edit=t}}},[a("el-form",{attrs:{model:e.editForm}},[a("el-form-item",{staticStyle:{"margin-bottom":"6px"}},[a("div",[e._v("请选择功能模块：")])]),e._v(" "),a("el-form-item",[a("el-tree",{ref:"tree1",attrs:{data:e.treeList,"show-checkbox":"","highlight-current":"","default-expand-all":"","node-key":"resSeq","default-checked-keys":e.editChecked,props:e.defaultProps}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.edit=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.edit=!1,e.editConfirm()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var De=a("VU/8")(Ve,Pe,!1,function(e){a("o1Sb")},null,null).exports;n.default.use(u.a);var Te=new u.a({routes:[{path:"/",component:w},{path:"/main",component:b,children:[{path:"/",component:x},{path:"/voiceTemplate",component:K},{path:"/proFormulation",component:T},{path:"/templateAttribute",component:R},{path:"/audioUpload",component:L},{path:"/degIntention",component:B},{path:"/agentList",component:G},{path:"/merchantAudit",component:H},{path:"/userJurisdiction",component:Y},{path:"/addNewAgent",component:ee},{path:"/addNewUserPersonal",component:te},{path:"/agentPower",component:oe},{path:"/merchantExamine",component:ie},{path:"/deviceManager",component:ue},{path:"/simCard",component:ge},{path:"/jackDetail",component:de},{path:"/dialManager",component:_e},{path:"/moduleManager",component:ye},{path:"/permissionConfig",component:De},{path:"/bussinessAddUser",component:ke},{path:"/MerconfigMan",component:Fe},{path:"/userPower",component:Ie}]}]}),qe=a("KPSb"),Ae=a.n(qe),Re=a("dvXI"),Ee=a.n(Re);n.default.use(i.a),n.default.use(Ee.a),n.default.config.productionTip=!1,n.default.prototype.$axios=c.a,c.a.defaults.withCredentials=!0,n.default.prototype.$md5=Ae.a,new n.default({el:"#app",router:Te,components:{App:s},template:"<App/>"}).$mount("#app")},NQDq:function(e,t){},OcM8:function(e,t){},UhgQ:function(e,t){},X5Ed:function(e,t){},cxCd:function(e,t){},dczl:function(e,t){},iToo:function(e,t){},ivFn:function(e,t){},iyHF:function(e,t){},o1Sb:function(e,t){},pTAt:function(e,t){},tH49:function(e,t){},ufYN:function(e,t){},x07M:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.39925db5e55102769b68.js.map